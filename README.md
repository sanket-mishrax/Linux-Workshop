# Linux Workshop
## CLI commands

## File Handling commands

### File Structure in Ubuntu

![File Hierarchy](https://www.linuxtrainingacademy.com/wp-content/uploads/2014/03/linux-folders.jpg)


| Dir | Description |
| ------ | ------ |
| / | The directory called “root.” It is the starting point for the file system hierarchy. Note that this is not related to the root, or superuser, account. |
| /bin | Binaries and other executable programs. |
| /etc | System configuration files. |
| /home | Home directories. |
| /opt | Optional or third party software. |
| /tmp | Temporary space, typically cleared on reboot. | 
| /usr | User related programs. |
| /var | Variable data, most notably log files. |

The Linux directory structure is like a tree. The base of the Linux file system hierarchy begins at the root. Directories branch off the root, but everything starts at root.

The directory separator in Linux is the forward slash (/). When talking about directories and speaking directory paths, “forward slash” is abbreviated to “slash.” Often the root of the file system is referred to as “slash” since the full path to it is /. If you hear someone say “look in slash” or “that file is in slash,” they are referring to the root directory.

The /bin directory is where you will find binary or executable files. Programs are written in source code which is human readable text. Source code is then compiled into machine readable binaries. They are called binaries because machine code is a series of zeros and ones. The import thing to know is that commands, programs, and applications that you can use are sometimes located in /bin.

Configuration files live in the /etc directory. Configuration files control how the operating system or applications behave. For example, there is a file in /etc that tells the operating system whether to boot into a text mode or a graphical mode.

User home directories are located in /home. If your account name is “pat” your home directory will be /home/pat. Linux systems can and often do have multiple user accounts. Home directories allow each user to separate their data from the other users on the system. The pat directory is knows as a subdirectory. A subdirectory is simply a directory that resides inside another directory.

The /opt directory houses optional or third party software. Software that is not bundled with the operating system will often been installed in /opt. For example, the Google Earth application is not part of the standard Linux operating system and gets installed in the /opt/google/earth directory.

Temporary space is allocated in /tmp. Most Linux distributions clear the contents of /tmp at boot time. Be aware that if you put files in /tmp and the Linux system reboots, your files will more than likely be gone. The /tmp directory is a great place to store temporary files, but do not put anything in /tmp that you want to keep long term.

The /usr directory is called “user.” You will find user related binary programs and executables in the /usr/bin directory.

Variable data such as log files reside in /var. Specifically, the /var/log directory contains logs generated by the operating system and other applications.

### pwd
```c
sanket@hydra:~/Desktop/OS$ pwd
/home/sanket/Desktop/OS
sanket@hydra:~/Desktop/OS$ 
```

### mkdir 
```c
sanket@hydra:~$ cd Desktop/
sanket@hydra:~/Desktop$ mkdir OS
```

### cd 

```sh
sanket@hydra:~/Desktop$ cd OS
sanket@hydra:~/Desktop/OS$
```

### ls

```c
sanket@hydra:~/Desktop/OS$ ls
css_2204  OS_forensics  p1.sh  p2.sh  p3.sh  p3.sh.sh  p4.sh  p5.sh  p6.sh  peda-session-prog.txt  peda-session-syscall.txt  prog  prog.c  syscall  syscalls.c
```

#### ls -l
```c
sanket@hydra:~/Desktop/OS$ ls -l
total 88
drwxrwxr-x 34 sanket sanket  4096 Feb  6 00:06 css_2204
drwxrwxr-x  8 sanket sanket  4096 Jan 14 21:56 OS_forensics
-rwxrwxr-x  1 sanket sanket   258 Jan 19 21:33 p1.sh
-rw-rw-r--  1 sanket sanket   239 Jan 19 21:37 p2.sh
-rw-rw-r--  1 sanket sanket   124 Jan 19 21:40 p3.sh
-rw-rw-r--  1 sanket sanket   124 Jan 19 21:40 p3.sh.sh
-rw-rw-r--  1 sanket sanket   172 Jan 19 21:41 p4.sh
-rw-rw-r--  1 sanket sanket   524 Jan 19 21:42 p5.sh
-rw-rw-r--  1 sanket sanket    96 Jan 19 21:43 p6.sh
-rw-rw-r--  1 sanket sanket    13 Feb  5 22:21 peda-session-prog.txt
-rw-rw-r--  1 sanket sanket    13 Feb  5 22:21 peda-session-syscall.txt
-rwxrwxr-x  1 sanket sanket 15808 Jan 19 00:28 prog
-rw-rw-r--  1 sanket sanket   161 Jan 19 00:28 prog.c
-rwxrwxr-x  1 sanket sanket 16544 Jan 12 22:33 syscall
-rw-rw-r--  1 sanket sanket  2668 Jan 12 22:33 syscalls.c
```

#### ls -al

```c
sanket@hydra:~/Desktop/OS$ ls -al
total 100
drwxrwxr-x  4 sanket sanket  4096 Feb  6 00:06 .
drwxr-xr-x  5 sanket sanket  4096 Jan  4 20:47 ..
drwxrwxr-x 34 sanket sanket  4096 Feb  6 00:06 css_2204
-rw-------  1 sanket sanket    42 Feb  5 22:22 .gdb_history
drwxrwxr-x  8 sanket sanket  4096 Jan 14 21:56 OS_forensics
-rwxrwxr-x  1 sanket sanket   258 Jan 19 21:33 p1.sh
-rw-rw-r--  1 sanket sanket   239 Jan 19 21:37 p2.sh
-rw-rw-r--  1 sanket sanket   124 Jan 19 21:40 p3.sh
-rw-rw-r--  1 sanket sanket   124 Jan 19 21:40 p3.sh.sh
-rw-rw-r--  1 sanket sanket   172 Jan 19 21:41 p4.sh
-rw-rw-r--  1 sanket sanket   524 Jan 19 21:42 p5.sh
-rw-rw-r--  1 sanket sanket    96 Jan 19 21:43 p6.sh
-rw-rw-r--  1 sanket sanket    13 Feb  5 22:21 peda-session-prog.txt
-rw-rw-r--  1 sanket sanket    13 Feb  5 22:21 peda-session-syscall.txt
-rwxrwxr-x  1 sanket sanket 15808 Jan 19 00:28 prog
-rw-rw-r--  1 sanket sanket   161 Jan 19 00:28 prog.c
-rwxrwxr-x  1 sanket sanket 16544 Jan 12 22:33 syscall
-rw-rw-r--  1 sanket sanket  2668 Jan 12 22:33 syscalls.c
```

### ls with wildcard characters

```c
sanket@hydra:~/Desktop/OS$ ls *.sh
p1.sh  p2.sh  p3.sh  p3.sh.sh  p4.sh  p5.sh  p6.sh
```

### touch command

```c
sanket@hydra:~/Desktop/OS$ touch ppp.java
sanket@hydra:~/Desktop/OS$ ls *.java
ppp.java
sanket@hydra:~/Desktop/OS$ 
```

### cp, mv 

```c
sanket@hydra:~$ cd Desktop/
sanket@hydra:~/Desktop$ cd OS/
sanket@hydra:~/Desktop/OS$ mkdir abc def
sanket@hydra:~/Desktop/OS$ cp prog.c abc
sanket@hydra:~/Desktop/OS$ mv syscall.c def
mv: cannot stat 'syscall.c': No such file or directory
sanket@hydra:~/Desktop/OS$ mv abc def
sanket@hydra:~/Desktop/OS$ ls
css_2204      p1.sh  p3.sh.sh  p6.sh                     ppp.java  syscall
def           p2.sh  p4.sh     peda-session-prog.txt     prog      syscalls.c
OS_forensics  p3.sh  p5.sh     peda-session-syscall.txt  prog.c
sanket@hydra:~/Desktop/OS$ ls def
abc
sanket@hydra:~/Desktop/OS$ ls def/abc
prog.c
sanket@hydra:~/Desktop/OS$ 
```

### rm

```c
sanket@hydra:~/Desktop/OS$ rm -rvf def
removed 'def/abc/prog.c'
removed directory 'def/abc'
removed directory 'def'
```


### chmod

```c
sanket@hydra:~/Desktop/OS$ ls def/abc -l
total 4
-rw-rw-r-- 1 sanket sanket 161 Feb  6 00:45 prog.c
sanket@hydra:~/Desktop/OS$ chmod 777 def/abc/prog.c 
sanket@hydra:~/Desktop/OS$ ls def/abc -l
total 4
-rwxrwxrwx 1 sanket sanket 161 Feb  6 00:45 prog.c
```

### chown

```c
sanket@hydra:~/Desktop/OS$ chown vegeta peda-session-prog.txt 
chown: invalid user: ‘vegeta’
sanket@hydra:~/Desktop/OS$ chown monalisa peda-session-prog.txt 
chown: changing ownership of 'peda-session-prog.txt': Operation not permitted
sanket@hydra:~/Desktop/OS$ sudo chown monalisa peda-session-prog.txt 
[sudo] password for sanket: 
sanket@hydra:~/Desktop/OS$ ls *.txt -l
-rw-rw-r-- 1 monalisa sanket 13 Feb  5 22:21 peda-session-prog.txt
-rw-rw-r-- 1 sanket   sanket 13 Feb  5 22:21 peda-session-syscall.txt
```


## Networking Commands

### whoami

```c
sanket@hydra:~/Desktop/OS$ whoami
sanket
```




## Processes Commands

### htop

![htop](https://vitux.com/wp-content/uploads/ubuntu-htop.jpg)

### ps
```c
sanket@hydra:~/Desktop/OS$ ps
    PID TTY          TIME CMD
   5610 pts/0    00:00:00 bash
   5687 pts/0    00:00:00 htop
   6063 pts/0    00:00:00 ps
sanket@hydra:~/Desktop/OS$ 
```
### ps -x

```c
sanket@hydra:~$ ps -x
    PID TTY      STAT   TIME COMMAND
   2471 ?        Ss     0:00 /lib/systemd/systemd --user
   2472 ?        S      0:00 (sd-pam)
   2478 ?        S<sl   0:00 /usr/bin/pipewire
   2479 ?        Ssl    0:00 /usr/bin/pipewire-media-session
   2480 ?        S<sl   0:00 /usr/bin/pulseaudio --daemonize=no --log-target=jou
   2489 ?        Sl     0:00 /usr/bin/gnome-keyring-daemon --daemonize --login
   2502 ?        Ss     0:00 /usr/bin/dbus-daemon --session --address=systemd: -
   2523 ?        Ssl    0:00 /usr/libexec/xdg-document-portal
   2526 ?        Ssl    0:00 /usr/libexec/xdg-permission-store
   2572 tty2     Ssl+   0:00 /usr/libexec/gdm-x-session --run-script env GNOME_S
   2574 tty2     Sl+    0:04 /usr/lib/xorg/Xorg vt2 -displayfd 3 -auth /run/user
   2594 tty2     Sl+    0:00 /usr/libexec/gnome-session-binary --session=ubuntu
   2667 ?        Ssl    0:00 /usr/libexec/at-spi-bus-launcher
   2673 ?        S      0:00 /usr/bin/dbus-daemon --config-file=/usr/share/defau
   2680 ?        Ssl    0:00 /usr/libexec/gnome-remote-desktop-daemon
   2682 ?        Ssl    0:00 /usr/libexec/gnome-session-ctl --monitor
   2693 ?        Ssl    0:00 /usr/libexec/gvfsd
   2700 ?        Sl     0:00 /usr/libexec/gvfsd-fuse /run/user/1000/gvfs -f
   2702 ?        Ssl    0:00 /usr/libexec/gnome-session-binary --systemd-service
   2730 ?        Ssl    0:02 /usr/bin/gnome-shell
   2752 ?        Sl     0:00 /usr/libexec/gnome-shell-calendar-server
   2760 ?        Ssl    0:00 /usr/libexec/evolution-source-registry
   2768 ?        Sl     0:00 /usr/libexec/goa-daemon
   2769 ?        Ssl    0:00 /usr/libexec/gvfs-udisks2-volume-monitor
   2775 ?        Ssl    0:00 /usr/libexec/evolution-calendar-factory
   2780 ?        Ssl    0:00 /usr/libexec/gvfs-goa-volume-monitor
   2791 ?        Sl     0:00 /usr/libexec/goa-identity-service
   2793 ?        Ssl    0:00 /usr/libexec/gvfs-mtp-volume-monitor
   2803 ?        Ssl    0:00 /usr/libexec/gvfs-gphoto2-volume-monitor
   2807 ?        Ssl    0:00 /usr/libexec/dconf-service
   2816 ?        Ssl    0:00 /usr/libexec/evolution-addressbook-factory
   2817 ?        Ssl    0:00 /usr/libexec/gvfs-afc-volume-monitor
   2834 ?        Sl     0:00 /usr/libexec/gvfsd-trash --spawner :1.20 /org/gtk/g
   2843 ?        Sl     0:00 /usr/bin/gjs /usr/share/gnome-shell/org.gnome.Shell
   2846 ?        Sl     0:00 /usr/libexec/at-spi2-registryd --use-gnome-session
   2870 ?        Ss     0:00 sh -c /usr/bin/ibus-daemon --panel disable $([ "$XD
   2871 ?        Ssl    0:00 /usr/libexec/gsd-a11y-settings
   2873 ?        Ssl    0:00 /usr/libexec/gsd-color
   2874 ?        Sl     0:00 /usr/bin/ibus-daemon --panel disable --xim
   2876 ?        Ssl    0:00 /usr/libexec/gsd-datetime
   2877 ?        Ssl    0:00 /usr/libexec/gsd-housekeeping
   2879 ?        Ssl    0:00 /usr/libexec/gsd-keyboard
   2881 ?        Ssl    0:00 /usr/libexec/gsd-media-keys
   2884 ?        Ssl    0:00 /usr/libexec/gsd-power
   2887 ?        Ssl    0:00 /usr/libexec/gsd-print-notifications
   2891 ?        Ssl    0:00 /usr/libexec/gsd-rfkill
   2893 ?        Ssl    0:00 /usr/libexec/gsd-screensaver-proxy
   2896 ?        Ssl    0:00 /usr/libexec/gsd-sharing
   2897 ?        Ssl    0:00 /usr/libexec/gsd-smartcard
   2900 ?        Ssl    0:00 /usr/libexec/gsd-sound
   2904 ?        Ssl    0:00 /usr/libexec/gsd-wacom
   2906 ?        Ssl    0:00 /usr/libexec/gsd-xsettings
   2917 ?        Ssl    0:00 /usr/libexec/xdg-desktop-portal
   2927 ?        Sl     0:00 /usr/libexec/gsd-disk-utility-notify
   2943 ?        Sl     0:00 /usr/libexec/evolution-data-server/evolution-alarm-
   2949 ?        Sl     0:00 /usr/libexec/ibus-memconf
   2950 ?        Sl     0:00 /usr/libexec/ibus-extension-gtk3
   2953 ?        Sl     0:00 /usr/libexec/ibus-x11 --kill-daemon
   2961 ?        Sl     0:00 /usr/libexec/ibus-portal
   2997 ?        Sl     0:00 /usr/libexec/gsd-printer
   3032 ?        Ssl    0:00 /usr/libexec/xdg-desktop-portal-gnome
   3045 ?        Sl     0:00 /usr/bin/gjs /usr/share/gnome-shell/org.gnome.Scree
   3056 ?        Sl     0:00 /snap/snap-store/1216/usr/bin/snap-store --gapplica
   3119 ?        Sl     0:00 /usr/libexec/ibus-engine-simple
   3127 ?        SNsl   0:00 /usr/libexec/tracker-miner-fs-3
   3219 ?        Ssl    0:00 /usr/libexec/xdg-desktop-portal-gtk
   3248 ?        Ss     0:00 /snap/snapd-desktop-integration/343/usr/bin/snapd-d
   3366 ?        Sl     0:00 /snap/snapd-desktop-integration/343/usr/bin/snapd-d
   3461 ?        Sl     0:00 gjs /usr/share/gnome-shell/extensions/ding@rasterso
   3483 ?        Ssl    0:00 /usr/libexec/gvfsd-metadata
   3588 ?        Sl     0:04 /snap/firefox/7720/usr/lib/firefox/firefox
   3676 ?        Sl     0:00 /snap/firefox/7720/usr/lib/firefox/crashhelper 3588
   3819 ?        S      0:00 /snap/firefox/7720/usr/lib/firefox/firefox -content
   3821 ?        Sl     0:00 /snap/firefox/7720/usr/lib/firefox/firefox -content
   3874 ?        Sl     0:00 /snap/firefox/7720/usr/lib/firefox/firefox -content
   3885 ?        Sl     0:00 /snap/firefox/7720/usr/lib/firefox/firefox -content
   3926 ?        Sl     0:00 /snap/snapd/current/usr/bin/snap userd
   4021 ?        Sl     0:03 /snap/firefox/7720/usr/lib/firefox/firefox -content
   4037 ?        Sl     0:02 /snap/firefox/7720/usr/lib/firefox/firefox -content
   4225 ?        Sl     0:00 /snap/firefox/7720/usr/lib/firefox/firefox -content
   4299 ?        Sl     0:00 /snap/firefox/7720/usr/lib/firefox/firefox -content
   4304 ?        Sl     0:00 /snap/firefox/7720/usr/lib/firefox/firefox -content
   4313 ?        Sl     0:00 /snap/firefox/7720/usr/lib/firefox/firefox -content
   4369 ?        SLl    0:08 /home/sanket/Downloads/jetbrains-toolbox-3.2.0.6585
   4576 ?        Ssl    0:00 /usr/libexec/glib-pacrunner
   4617 ?        Ssl    0:00 /usr/libexec/gnome-terminal-server
   4640 pts/0    Ss     0:00 bash
   4649 ?        Sl     0:00 update-notifier
   4732 pts/0    R+     0:00 ps -x
```

### pstree

```c
sanket@hydra:~/Desktop/OS$ pstree 
systemd─┬─ModemManager───2*[{ModemManager}]
        ├─NetworkManager───2*[{NetworkManager}]
        ├─accounts-daemon───2*[{accounts-daemon}]
        ├─acpid
        ├─avahi-daemon───avahi-daemon
        ├─bluetoothd
        ├─boltd───2*[{boltd}]
        ├─colord───2*[{colord}]
        ├─containerd───15*[{containerd}]
        ├─cron
        ├─cups-browsed───2*[{cups-browsed}]
        ├─cupsd
        ├─dbus-daemon
        ├─dockerd───19*[{dockerd}]
        ├─fwupd───4*[{fwupd}]
        ├─gdm3─┬─gdm-session-wor─┬─gdm-x-session─┬─Xorg───7*[{Xorg}]
        │      │                 │               ├─gnome-session-b───2*[{gnome-session-b}]
        │      │                 │               └─2*[{gdm-x-session}]
        │      │                 └─2*[{gdm-session-wor}]
        │      └─2*[{gdm3}]
        ├─gnome-keyring-d───3*[{gnome-keyring-d}]
        ├─irqbalance───{irqbalance}
        ├─2*[kerneloops]
        ├─networkd-dispat
        ├─nvidia-persiste
        ├─packagekitd───2*[{packagekitd}]
        ├─polkitd───2*[{polkitd}]
        ├─power-profiles-───2*[{power-profiles-}]
        ├─rsyslogd───3*[{rsyslogd}]
        ├─rtkit-daemon───2*[{rtkit-daemon}]
        ├─snapd───33*[{snapd}]
        ├─sshd
        ├─switcheroo-cont───2*[{switcheroo-cont}]
        ├─systemd─┬─(sd-pam)
        │         ├─at-spi-bus-laun─┬─dbus-daemon
        │         │                 └─3*[{at-spi-bus-laun}]
        │         ├─at-spi2-registr───2*[{at-spi2-registr}]
        │         ├─crashhelper───{crashhelper}
        │         ├─dbus-daemon
        │         ├─dconf-service───2*[{dconf-service}]
        │         ├─evolution-addre───5*[{evolution-addre}]
        │         ├─evolution-calen───8*[{evolution-calen}]
        │         ├─evolution-sourc───3*[{evolution-sourc}]
        │         ├─2*[gjs───10*[{gjs}]]
        │         ├─glib-pacrunner───2*[{glib-pacrunner}]
        │         ├─gnome-remote-de───3*[{gnome-remote-de}]
        │         ├─gnome-session-b─┬─MathWorksServic─┬─InstallMathWork─┬─InstallMathWork───{In+

```

### grep

global regular expression print. use grep to search through files, or use it in conjunction with pipes or other commands to filter the output of another command. 

We have taken a dummy txt file. Contents are as below.

```sh
Alright, here’s a pleasantly random little riff. 

LaTeX and Linux feel like cousins who grew up in the same slightly nerdy household. They both reward patience, curiosity, and a willingness to read documentation that looks intimidating 
at first but slowly becomes… comforting? Linux gives you this sense of control over your machine—nothing is hidden, everything is configurable, and if something breaks, you can usually 
figure out *why*. LaTeX does the same thing for documents. Instead of dragging text boxes around and hoping formatting behaves, you declare what things *are* (a section, an equation, a 
citation), and let the system handle how they should look.

There’s also a shared culture around them: command lines, plain text files, dotfiles, version control, and the quiet pride of having a setup that looks minimal but is secretly powerful. 
Writing a LaTeX document on a Linux machine feels like peak “I know exactly what I’m doing” energy—even when you’re actually Googling why a package conflicts with another package at 2 a.m. 
Both ecosystems encourage reproducibility and precision, which is why academics, engineers, and power users gravitate toward them.

And yeah, there’s a learning curve. Linux will absolutely ask you to choose between twelve audio servers, and LaTeX will throw an error that references a line number that doesn’t exist 
anymore. But once it clicks, it *clicks*. You get clean PDFs, beautiful equations, scripts that automate everything, and a workflow that scales instead of collapsing under its own mess. 
It’s not flashy—but it’s elegant, stubborn, and deeply satisfying.

If you want, I can make it more technical, more humorous, or aim it at a specific audience (students, devs, academics, chaos gremlins who love terminals).
```

### Finding all occurrences of a string in the given file.

```c
sanket@hydra:~/Documents$ grep "Linux" linux.txt
LaTeX and Linux feel like cousins who grew up in the same slightly nerdy household. They both reward patience, curiosity, and a willingness to read documentation that looks intimidating 
at first but slowly becomes… comforting? Linux gives you this sense of control over your machine—nothing is hidden, everything is configurable, and if something breaks, you can usually 
Writing a LaTeX document on a Linux machine feels like peak “I know exactly what I’m doing” energy—even when you’re actually Googling why a package conflicts with another package at 2 a.m. 
And yeah, there’s a learning curve. Linux will absolutely ask you to choose between twelve audio servers, and LaTeX will throw an error that references a line number that doesn’t exist 
sanket@hydra:~/Documents$ 
```

### Filtering or Searching output of another command

```c
sanket@hydra:~/Documents$ head -n 15 linux.txt | grep "Linux" 
LaTeX and Linux feel like cousins who grew up in the same slightly nerdy household. They both reward patience, curiosity, and a willingness to read documentation that looks intimidating 
at first but slowly becomes… comforting? Linux gives you this sense of control over your machine—nothing is hidden, everything is configurable, and if something breaks, you can usually 
Writing a LaTeX document on a Linux machine feels like peak “I know exactly what I’m doing” energy—even when you’re actually Googling why a package conflicts with another package at 2 a.m. 
And yeah, there’s a learning curve. Linux will absolutely ask you to choose between twelve audio servers, and LaTeX will throw an error that references a line number that doesn’t exist 
sanket@hydra:~/Documents$ 
```

### Display Line Numbers Containing Matches

```c
sanket@hydra:~/Documents$ grep -n "Linux" linux.txt 
3:LaTeX and Linux feel like cousins who grew up in the same slightly nerdy household. They both reward patience, curiosity, and a willingness to read documentation that looks intimidating 
4:at first but slowly becomes… comforting? Linux gives you this sense of control over your machine—nothing is hidden, everything is configurable, and if something breaks, you can usually 
9:Writing a LaTeX document on a Linux machine feels like peak “I know exactly what I’m doing” energy—even when you’re actually Googling why a package conflicts with another package at 2 a.m. 
12:And yeah, there’s a learning curve. Linux will absolutely ask you to choose between twelve audio servers, and LaTeX will throw an error that references a line number that doesn’t exist 
sanket@hydra:~/Documents$ 
```

### Using regular expressions with grep
The search string can be a regular expression, which makes grep quite strong. However, I will not go into detail on how to use regexp with grep in this article.

The following example will search for lines which contains any digits from 0 up to 9.
```c
anket@hydra:~/Documents$ grep "[0-9]" linux.txt 
Writing a LaTeX document on a Linux machine feels like peak “I know exactly what I’m doing” energy—even when you’re actually Googling why a package conflicts with another package at 2 a.m. 
sanket@hydra:~/Documents$ 
```

### Searching in all files recursively
With the grep option "-r", you can execute a recursive search. It will look for the specified pattern in all files in the current directory and its sub-directories. Notice, I tacked "-i" with "-r option" to make the search case insensitive:

```c
grep: deeplearningKeras/deep-learning-with-python-notebooks/.venv/lib/python3.10/site-packages/contourpy/_contourpy.cpython-310-x86_64-linux-gnu.so: binary file matches
deeplearningKeras/deep-learning-with-python-notebooks/.venv/lib/python3.10/site-packages/tensorboard_data_server-0.7.2.dist-info/WHEEL:Tag: py3-none-manylinux_2_31_x86_64
deeplearningKeras/deep-learning-with-python-notebooks/.venv/lib/python3.10/site-packages/nvidia_cuda_runtime_cu12-12.9.79.dist-info/METADATA:Classifier: Operating System :: POSIX :: Linux
deeplearningKeras/deep-learning-with-python-notebooks/.venv/lib/python3.10/site-packages/nvidia_cuda_runtime_cu12-12.9.79.dist-info/licenses/License.txt:Linux platform:
deeplearningKeras/deep-learning-with-python-notebooks/.venv/lib/python3.10/site-packages/nvidia_cuda_runtime_cu12-12.9.79.dist-info/licenses/License.txt:Linux platform:
deeplearningKeras/deep-learning-with-python-notebooks/.venv/lib/python3.10/site-packages/nvidia_cuda_runtime_cu12-12.9.79.dist-info/licenses/License.txt:Linux or FreeBSD operating systems, or other operating systems
deeplearningKeras/deep-learning-with-python-notebooks/.venv/lib/python3.10/site-packages/nvidia_cuda_runtime_cu12-12.9.79.dist-info/licenses/License.txt:Linux
deeplearningKeras/deep-learning-with-python-notebooks/.venv/lib/python3.10/site-packages/nvidia_cuda_runtime_cu12-12.9.79.dist-info/licenses/License.txt:Linux
deeplearningKeras/deep-learning-with-python-notebooks/.venv/lib/python3.10/site-packages/nvidia_cuda_runtime_cu12-12.9.79.dist-info/licenses/License.txt:Linux
deeplearningKeras/deep-learning-with-python-notebooks/.venv/lib/python3.10/site-packages/nvidia_cuda_runtime_cu12-12.9.79.dist-info/licenses/License.txt:Linux
deeplearningKeras/deep-learning-with-python-notebooks/.venv/lib/python3.10/site-packages/nvidia_cuda_runtime_cu12-12.9.79.dist-info/licenses/License.txt:Linux
deeplearningKeras/deep-learning-with-python-notebooks/.venv/lib/python3.10/site-packages/nvidia_cuda_runtime_cu12-12.9.79.dist-info/licenses/License.txt:Linux
deeplearningKeras/deep-learning-with-python-notebooks/.venv/lib/python3.10/site-packages/nvidia_cuda_runtime_cu12-12.9.79.dist-info/licenses/License.txt:Linux
deeplearningKeras/deep-learning-with-python-notebooks/.venv/lib/python3.10/site-packages/nvidia_cuda_runtime_cu12-12.9.79.dist-info/licenses/License.txt:Linux
deeplearningKeras/deep-learning-with-python-notebooks/.venv/lib/python3.10/site-packages/nvidia_cuda_runtime_cu12-12.9.79.dist-info/licenses/License.txt:Linux
deeplearningKeras/deep-learning-with-python-notebooks/.venv/lib/python3.10/site-packages/nvidia_cuda_runtime_cu12-12.9.79.dist-info/licenses/License.txt:Linux
deeplearningKeras/deep-learning-with-python-notebooks/.venv/lib/python3.10/site-packages/nvidia_cuda_runtime_cu12-12.9.79.dist-info/licenses/License.txt:Linux
deeplearningKeras/deep-learning-with-python-notebooks/.venv/lib/python3.10/site-packages/nvidia_cuda_runtime_cu12-12.9.79.dist-info/licenses/License.txt:Linux
deeplearningKeras/deep-learning-with-python-notebooks/.venv/lib/python3.10/site-packages/nvidia_cuda_runtime_cu12-12.9.79.dist-info/licenses/License.txt:Linux
deeplearningKeras/deep-learning-with-python-notebooks/.venv/lib/python3.10/site-packages/nvidia_cuda_runtime_cu12-12.9.79.dist-info/licenses/License.txt:Linux
deeplearningKeras/deep-learning-with-python-notebooks/.venv/lib/python3.10/site-packages/nvidia_cuda_runtime_cu12-12.9.79.dist-info/licenses/License.txt:Linux
deeplearningKeras/deep-learning-with-python-notebooks/.venv/lib/python3.10/site-packages/nvidia_cuda_runtime_cu12-12.9.79.dist-info/licenses/License.txt:Linux
deeplearningKeras/deep-learning-with-python-notebooks/.venv/lib/python3.10/site-packages/nvidia_cuda_runtime_cu12-12.9.79.dist-info/WHEEL:Tag: py3-none-manylinux2014_x86_64
deeplearningKeras/deep-learning-with-python-notebooks/.venv/lib/python3.10/site-packages/nvidia_cuda_runtime_cu12-12.9.79.dist-info/WHEEL:Tag: py3-none-manylinux_2_17_x86_64
deeplearningKeras/deep-learning-with-python-notebooks/.venv/lib/python3.10/site-packages/ptyprocess/ptyprocess.py:        Linux, and the empty-string return used on BSD platforms and (seemingly)
deeplearningKeras/deep-learning-with-python-notebooks/.venv/lib/python3.10/site-packages/ptyprocess/ptyprocess.py:                # Linux-style EOF
deeplearningKeras/deep-learning-with-python-notebooks/.venv/lib/python3.10/site-packages/ptyprocess/ptyprocess.py:                # Linux-style EOF
deeplearningKeras/deep-learning-with-python-notebooks/.venv/lib/python3.10/site-packages/ptyprocess/ptyprocess.py:            # This is for Linux, which requires the blocking form
grep: deeplearningKeras/deep-learning-with-python-notebooks/.venv/lib/python3.10/site-packages/ptyprocess/__pycache__/ptyprocess.cpython-310.pyc: binary file matches
deeplearningKeras/deep-learning-with-python-notebooks/.venv/lib/python3.10/site-packages/packaging/markers.py:    The system/OS name, e.g. ``'Linux'``, ``'Windows'`` or ``'Java'``.
deeplearningKeras/deep-learning-with-python-notebooks/.venv/lib/python3.10/site-packages/packaging/markers.py:    For Unix systems, except on Linux and AIX, this is the lowercased OS name as
deeplearningKeras/deep-learning-with-python-notebooks/.venv/lib/python3.10/site-packages/packaging/_musllinux.py:    """Generate musllinux tags compatible to the current platform.
deeplearningKeras/deep-learning-with-python-notebooks/.venv/lib/python3.10/site-packages/packaging/_musllinux.py:        platform tag after the ``linux_`` prefix, e.g. ``x86_64``.
deeplearningKeras/deep-learning-with-python-notebooks/.venv/lib/python3.10/site-packages/packaging/_musllinux.py:        The ``linux_`` prefix is assumed as a prerequisite for the current platform to
deeplearningKeras/deep-learning-with-python-notebooks/.venv/lib/python3.10/site-packages/packaging/_musllinux.py:        be musllinux-compatible.
deeplearningKeras/deep-learning-with-python-notebooks/.venv/lib/python3.10/site-packages/packaging/_musllinux.py:    :returns: An iterator of compatible musllinux tags.
deeplearningKeras/deep-learning-with-python-notebooks/.venv/lib/python3.10/site-packages/packaging/_musllinux.py:            yield f"musllinux_{sys_musl.major}_{minor}_{arch}"
deeplearningKeras/deep-learning-with-python-notebooks/.venv/lib/python3.10/site-packages/packaging/_musllinux.py:    assert plat.startswith("linux-"), "not linux"
deeplearningKeras/deep-learning-with-python-notebooks/.venv/lib/python3.10/site-packages/packaging/_manylinux.py:def _is_linux_armhf(executable: str) -> bool:
deeplearningKeras/deep-learning-with-python-notebooks/.venv/lib/python3.10/site-packages/packaging/_manylinux.py:def _is_linux_i686(executable: str) -> bool:
deeplearningKeras/deep-learning-with-python-notebooks/.venv/lib/python3.10/site-packages/packaging/_manylinux.py:        return _is_linux_armhf(executable)
deeplearningKeras/deep-learning-with-python-notebooks/.venv/lib/python3.10/site-packages/packaging/_manylinux.py:        return _is_linux_i686(executable)
deeplearningKeras/deep-learning-with-python-notebooks/.venv/lib/python3.10/site-packages/packaging/_manylinux.py:    # Check for presence of _manylinux module.
deeplearningKeras/deep-learning-with-python-notebooks/.venv/lib/python3.10/site-packages/packaging/_manylinux.py:        import _manylinux
deeplearningKeras/deep-learning-with-python-notebooks/.venv/lib/python3.10/site-packages/packaging/_manylinux.py:    if hasattr(_manylinux, "manylinux_compatible"):
deeplearningKeras/deep-learning-with-python-notebooks/.venv/lib/python3.10/site-packages/packaging/_manylinux.py:        result = _manylinux.manylinux_compatible(version[0], version[1], arch)
deeplearningKeras/deep-learning-with-python-notebooks/.venv/lib/python3.10/site-packages/packaging/_manylinux.py:        if hasattr(_manylinux, "manylinux1_compatible"):
deeplearningKeras/deep-learning-with-python-notebooks/.venv/lib/python3.10/site-packages/packaging/_manylinux.py:            return bool(_manylinux.manylinux1_compatible)
deeplearningKeras/deep-learning-with-python-notebooks/.venv/lib/python3.10/site-packages/packaging/_manylinux.py:        if hasattr(_manylinux, "manylinux2010_compatible"):
deeplearningKeras/deep-learning-with-python-notebooks/.venv/lib/python3.10/site-packages/packaging/_manylinux.py:            return bool(_manylinux.manylinux2010_compatible)
deeplearningKeras/deep-learning-with-python-notebooks/.venv/lib/python3.10/site-packages/packaging/_manylinux.py:        if hasattr(_manylinux, "manylinux2014_compatible"):
deeplearningKeras/deep-learning-with-python-notebooks/.venv/lib/python3.10/site-packages/packaging/_manylinux.py:            return bool(_manylinux.manylinux2014_compatible)
deeplearningKeras/deep-learning-with-python-notebooks/.venv/lib/python3.10/site-packages/packaging/_manylinux.py:_LEGACY_MANYLINUX_MAP = {
deeplearningKeras/deep-learning-with-python-notebooks/.venv/lib/python3.10/site-packages/packaging/_manylinux.py:    (2, 17): "manylinux2014",
deeplearningKeras/deep-learning-with-python-notebooks/.venv/lib/python3.10/site-packages/packaging/_manylinux.py:    (2, 12): "manylinux2010",
deeplearningKeras/deep-learning-with-python-notebooks/.venv/lib/python3.10/site-packages/packaging/_manylinux.py:    (2, 5): "manylinux1",
deeplearningKeras/deep-learning-with-python-notebooks/.venv/lib/python3.10/site-packages/packaging/_manylinux.py:    """Generate manylinux tags compatible to the current platform.
deeplearningKeras/deep-learning-with-python-notebooks/.venv/lib/python3.10/site-packages/packaging/_manylinux.py:        platform tag after the ``linux_`` prefix, e.g. ``x86_64``.
deeplearningKeras/deep-learning-with-python-notebooks/.venv/lib/python3.10/site-packages/packaging/_manylinux.py:        The ``linux_`` prefix is assumed as a prerequisite for the current platform to
deeplearningKeras/deep-learning-with-python-notebooks/.venv/lib/python3.10/site-packages/packaging/_manylinux.py:        be manylinux-compatible.
deeplearningKeras/deep-learning-with-python-notebooks/.venv/lib/python3.10/site-packages/packaging/_manylinux.py:    :returns: An iterator of compatible manylinux tags.
deeplearningKeras/deep-learning-with-python-notebooks/.venv/lib/python3.10/site-packages/packaging/_manylinux.py:                tag = "manylinux_{}_{}".format(*glibc_version)
deeplearningKeras/deep-learning-with-python-notebooks/.venv/lib/python3.10/site-packages/packaging/_manylinux.py:                # Handle the legacy manylinux1, manylinux2010, manylinux2014 tags.
deeplearningKeras/deep-learning-with-python-notebooks/.venv/lib/python3.10/site-packages/packaging/_manylinux.py:                if glibc_version in _LEGACY_MANYLINUX_MAP:
deeplearningKeras/deep-learning-with-python-notebooks/.venv/lib/python3.10/site-packages/packaging/_manylinux.py:                    legacy_tag = _LEGACY_MANYLINUX_MAP[glibc_version]
deeplearningKeras/deep-learning-with-python-notebooks/.venv/lib/python3.10/site-packages/packaging/_elffile.py:ELF header: https://refspecs.linuxfoundation.org/elf/gabi4+/ch4.eheader.html
deeplearningKeras/deep-learning-with-python-notebooks/.venv/lib/python3.10/site-packages/packaging/tags.py:from . import _manylinux, _musllinux
deeplearningKeras/deep-learning-with-python-notebooks/.venv/lib/python3.10/site-packages/packaging/tags.py:    # - linux:   '.cpython-310-x86_64-linux-gnu.so' => cp310
deeplearningKeras/deep-learning-with-python-notebooks/.venv/lib/python3.10/site-packages/packaging/tags.py:    # - pypy:    '.pypy38-pp73-x86_64-linux-gnu.so' => pypy38_pp73
deeplearningKeras/deep-learning-with-python-notebooks/.venv/lib/python3.10/site-packages/packaging/tags.py:def _linux_platforms(is_32bit: bool = _32_BIT_INTERPRETER) -> Iterator[str]:
deeplearningKeras/deep-learning-with-python-notebooks/.venv/lib/python3.10/site-packages/packaging/tags.py:    linux = _normalize_string(sysconfig.get_platform())
deeplearningKeras/deep-learning-with-python-notebooks/.venv/lib/python3.10/site-packages/packaging/tags.py:    if not linux.startswith("linux_"):
deeplearningKeras/deep-learning-with-python-notebooks/.venv/lib/python3.10/site-packages/packaging/tags.py:        yield linux
deeplearningKeras/deep-learning-with-python-notebooks/.venv/lib/python3.10/site-packages/packaging/tags.py:        if linux == "linux_x86_64":
deeplearningKeras/deep-learning-with-python-notebooks/.venv/lib/python3.10/site-packages/packaging/tags.py:            linux = "linux_i686"
deeplearningKeras/deep-learning-with-python-notebooks/.venv/lib/python3.10/site-packages/packaging/tags.py:        elif linux == "linux_aarch64":
deeplearningKeras/deep-learning-with-python-notebooks/.venv/lib/python3.10/site-packages/packaging/tags.py:            linux = "linux_armv8l"
.
.
.
.
```

### Killing a process

Signals are a form of dialogue between processes from other processes, the kernel, or the specific process itself. Each process has a current behavior or disposition, of which there are five types:

    Term
    Ign
    Core
    Stop
    Cont

These attributes determine how the process will behave when a signal is delivered to it. The Term’s default action is to terminate the process, which is primarily used by the kill command.

There are a total of 64 signals used with the kill command. The one we send will depend on the desired result, as different signals have different effects and outcomes. Out of these 64 signals, the first 31 are standard signals. The rest are real-time signals.

```c
sanket@hydra:~/Documents$ kill -l
 1) SIGHUP	 2) SIGINT	 3) SIGQUIT	 4) SIGILL	 5) SIGTRAP
 6) SIGABRT	 7) SIGBUS	 8) SIGFPE	 9) SIGKILL	10) SIGUSR1
11) SIGSEGV	12) SIGUSR2	13) SIGPIPE	14) SIGALRM	15) SIGTERM
16) SIGSTKFLT	17) SIGCHLD	18) SIGCONT	19) SIGSTOP	20) SIGTSTP
21) SIGTTIN	22) SIGTTOU	23) SIGURG	24) SIGXCPU	25) SIGXFSZ
26) SIGVTALRM	27) SIGPROF	28) SIGWINCH	29) SIGIO	30) SIGPWR
31) SIGSYS	34) SIGRTMIN	35) SIGRTMIN+1	36) SIGRTMIN+2	37) SIGRTMIN+3
38) SIGRTMIN+4	39) SIGRTMIN+5	40) SIGRTMIN+6	41) SIGRTMIN+7	42) SIGRTMIN+8
43) SIGRTMIN+9	44) SIGRTMIN+10	45) SIGRTMIN+11	46) SIGRTMIN+12	47) SIGRTMIN+13
48) SIGRTMIN+14	49) SIGRTMIN+15	50) SIGRTMAX-14	51) SIGRTMAX-13	52) SIGRTMAX-12
53) SIGRTMAX-11	54) SIGRTMAX-10	55) SIGRTMAX-9	56) SIGRTMAX-8	57) SIGRTMAX-7
58) SIGRTMAX-6	59) SIGRTMAX-5	60) SIGRTMAX-4	61) SIGRTMAX-3	62) SIGRTMAX-2
63) SIGRTMAX-1	64) SIGRTMAX	
sanket@hydra:~/Documents$ 
```
For most of these signals, a program may or may not specify a different action. If the program defines the action, it is called catching or handling the signal. If no action occurs, the signal will be ignored.

The most commonly used signals are as follows:

```c
|Signal Name|	Single Value|	Effect|
SIGHUP	1	Hangup, reload a process
SIGINT	2	Interrupt from keyboard
SIGKILL	9	Kill a process
SIGTERM	15	Terminate a process gracefully
SIGSTOP	17, 19, 23	Stop a process
```

The SIGKILL and SIGSTOP signals cannot be caught, blocked, or ignored, while the SIGTERM signal can be caught or ignored. That is why we can use SIGKILL in Linux when SIGTERM fails to stop or end the process.

There are other general rules for stopping a process in Linux. It is essential to note that regular users can send signals to their own processes but not to those that belong to other users. The root user, on the other hand, can send signals to all other user’s processes. Here are some additional general rules:

    Signals sent depend on what PID we pass to the command. 
    If the PID is greater than zero, then the signal is sent to the process with that PID.
    If the PID is equal to zero, the signal is sent to all processes in the process group (PGID) of the shell involved in the kill command. 
    If the PID is equal to -1, the signal is sent to all processes with the same user ID as the user who has invoked the kill command. 
    If the PID is less than -1, the signal is sent to all processes in the process group with the process group ID equal to the absolute value of the PID.

```c
sanket@hydra:~/Desktop/OS/OS_forensics/intro$ ps -x | grep ./loop
  19487 pts/0    S+     0:00 ./loop
  19587 pts/1    S+     0:00 grep --color=auto ./loop
  
  sanket@hydra:~/Desktop/OS/OS_forensics/intro$ kill -9 19487
```



```c
sanket@hydra:~/Desktop/OS/OS_forensics/intro$ ps -x | grep ./loop
  20999 pts/0    S+     0:00 ./loop
  21027 pts/1    S+     0:00 grep --color=auto ./loop
```
Check with kill 17 20999.. ( Termination of process)

### PCBs

Process Control Blocks

```c
sanket@hydra:~/Desktop/OS/OS_forensics/intro$ cd /proc/
sanket@hydra:/proc$ ls
1      1067  1162  1316   15     164    17452  19138  20511  21598  229    2478  266   2791  2893  32    353   394   423   4617  5346  6550  770  941   981            filesystems    net
10     1068  1167  1317   150    165    17498  192    20513  216    22982  2479  2667  2793  2896  321   354   395   424   463   5378  6551  78   942   989            fs             pagetypeinfo
100    107   117   132    15115  166    176    193    20581  21601  23     248   2673  28    2897  3219  355   396   425   4640  54    6553  79   946   9896           interrupts     partitions
10018  1073  118   134    152    16665  177    194    20582  21625  230    2480  268   2803  29    3248  356   4     426   4649  5464  6569  80   95    9897           iomem          pressure
101    1074  119   135    153    16674  178    195    20583  21632  232    2489  2680  2807  2900  325   3588  40    427   47    56    6586  81   954   99             ioports        schedstat
102    1076  1191  136    15331  16675  179    19513  206    21698  2324   250   2682  2816  2904  33    36    401   428   48    57    6595  82   955   992            irq            scsi
1031   1079  12    137    15369  16676  17905  196    2061   218    233    2502  2693  2817  2906  3366  363   4021  433   4878  573   66    83   96    acpi           kallsyms       self
1032   108   120   138    154    16677  17952  197    2062   219    234    252   27    283   2917  3375  3676  4037  434   4879  58    6609  84   962   asound         kcore          slabinfo
1033   1080  121   14     15452  167    18     1975   2064   21968  2348   2523  2700  2834  2927  339   38    405   435   4880  59    6632  86   9631  bootconfig     keys           softirqs
1034   1082  1216  140    155    168    180    198    20658  22     235    2526  2702  2843  2943  34    3819  41    436   4892  6     6641  87   9632  buddyinfo      key-users      stat
1035   1088  1217  141    15550  16840  18180  199    20659  220    236    2532  271   2846  2949  340   3821  412   4369  490   60    6689  872  966   bus            kmsg           swaps
1036   109   1218  142    15551  1697   182    2      2066   221    237    254   273   285   2950  344   385   413   437   4997  600   6690  88   968   cgroups        kpagecgroup    sys
1037   1090  122   143    156    17     183    20     20660  2218   239    255   2730  2870  2953  345   386   414   438   5     62    6691  89   969   cmdline        kpagecount     sysrq-trigger
1038   1096  123   144    158    170    184    200    20661  222    24     256   274   2871  2961  346   387   415   439   50    620   68    899  972   consoles       kpageflags     sysvipc
1039   1099  124   146    1587   1701   185    20055  20671  223    240    2572  2740  2873  2997  3461  3874  416   44    51    6202  69    90   973   cpuinfo        latency_stats  thread-self
104    110   125   147    1589   17019  1855   201    209    224    241    2574  275   2874  3     347   388   417   440   5147  6235  7     900  974   crypto         loadavg        timer_list
105    1102  126   148    159    171    186    202    21     22405  242    259   2752  2876  30    348   3885  418   441   52    63    70    901  975   devices        locks          tty
106    1105  128   14823  1590   172    1861   203    210    22407  2422   2594  276   2877  301   3483  389   419   442   5273  64    71    902  976   diskstats      mdstat         uptime
1060   111   129   14842  16     173    188    20322  2101   226    243    26    2760  2879  3032  349   39    42    443   5295  6488  72    92   977   dma            meminfo        version
1061   112   13    149    160    1730   189    204    211    22636  2458   260   2768  2881  3045  35    390   420   444   5298  6495  74    93   978   driver         misc           version_signature
1064   113   130   14933  161    174    19     20403  213    227    247    261   2769  2884  3056  350   391   421   45    53    65    75    939  979   dynamic_debug  modules        vmallocinfo
1065   114   131   14960  16117  17440  190    20509  214    2277   2471   263   2775  2887  3119  351   392   422   4576  533   6513  76    94   98    execdomains    mounts         vmstat
1066   116   1315  14983  162    17450  191    20510  21489  228    2472   264   2780  2891  3127  352   3926  4225  46    534   6545  77    940  980   fb             mtrr           zoneinfo
sanket@hydra:/proc/21489$ ls -al
total 0
dr-xr-xr-x   9 sanket sanket  0 Feb  6 06:49 .
dr-xr-xr-x 610 root   root    0 Feb  6 05:54 ..
-r--r--r--   1 sanket sanket  0 Feb  6 06:54 arch_status
dr-xr-xr-x   2 sanket sanket  0 Feb  6 06:54 attr
-rw-r--r--   1 sanket sanket  0 Feb  6 06:54 autogroup
-r--------   1 sanket sanket  0 Feb  6 06:54 auxv
-r--r--r--   1 sanket sanket  0 Feb  6 06:49 cgroup
--w-------   1 sanket sanket  0 Feb  6 06:54 clear_refs
-r--r--r--   1 sanket sanket  0 Feb  6 06:49 cmdline
-rw-r--r--   1 sanket sanket  0 Feb  6 06:54 comm
-rw-r--r--   1 sanket sanket  0 Feb  6 06:54 coredump_filter
-r--r--r--   1 sanket sanket  0 Feb  6 06:54 cpu_resctrl_groups
-r--r--r--   1 sanket sanket  0 Feb  6 06:54 cpuset
lrwxrwxrwx   1 sanket sanket  0 Feb  6 06:54 cwd -> /proc/21491/fdinfo
-r--------   1 sanket sanket  0 Feb  6 06:54 environ
lrwxrwxrwx   1 sanket sanket  0 Feb  6 06:49 exe -> /snap/firefox/7720/usr/lib/firefox/firefox
dr-x------   2 sanket sanket 47 Feb  6 06:54 fd
dr-xr-xr-x   2 sanket sanket  0 Feb  6 06:54 fdinfo
-rw-r--r--   1 sanket sanket  0 Feb  6 06:49 gid_map
-r--------   1 sanket sanket  0 Feb  6 06:54 io
-r--------   1 sanket sanket  0 Feb  6 06:54 ksm_merging_pages
-r--------   1 sanket sanket  0 Feb  6 06:54 ksm_stat
-r--r--r--   1 sanket sanket  0 Feb  6 06:54 latency
-r--r--r--   1 sanket sanket  0 Feb  6 06:54 limits
-rw-r--r--   1 sanket sanket  0 Feb  6 06:54 loginuid
dr-x------   2 sanket sanket  0 Feb  6 06:54 map_files
-r--r--r--   1 sanket sanket  0 Feb  6 06:49 maps
-rw-------   1 sanket sanket  0 Feb  6 06:54 mem
-r--r--r--   1 sanket sanket  0 Feb  6 06:49 mountinfo
-r--r--r--   1 sanket sanket  0 Feb  6 06:54 mounts
-r--------   1 sanket sanket  0 Feb  6 06:54 mountstats
dr-xr-xr-x  53 sanket sanket  0 Feb  6 06:54 net
dr-x--x--x   2 sanket sanket  0 Feb  6 06:54 ns
-r--r--r--   1 sanket sanket  0 Feb  6 06:54 numa_maps
-rw-r--r--   1 sanket sanket  0 Feb  6 06:54 oom_adj
-r--r--r--   1 sanket sanket  0 Feb  6 06:54 oom_score
-rw-r--r--   1 sanket sanket  0 Feb  6 06:49 oom_score_adj
-r--------   1 sanket sanket  0 Feb  6 06:54 pagemap
-r--------   1 sanket sanket  0 Feb  6 06:54 patch_state
-r--------   1 sanket sanket  0 Feb  6 06:54 personality
-rw-r--r--   1 sanket sanket  0 Feb  6 06:54 projid_map
lrwxrwxrwx   1 sanket sanket  0 Feb  6 06:54 root -> /proc/21491/fdinfo
-rw-r--r--   1 sanket sanket  0 Feb  6 06:54 sched
-r--r--r--   1 sanket sanket  0 Feb  6 06:54 schedstat
-r--r--r--   1 sanket sanket  0 Feb  6 06:54 sessionid
-rw-r--r--   1 sanket sanket  0 Feb  6 06:49 setgroups
-r--r--r--   1 sanket sanket  0 Feb  6 06:49 smaps
-r--r--r--   1 sanket sanket  0 Feb  6 06:54 smaps_rollup
-r--------   1 sanket sanket  0 Feb  6 06:54 stack
-r--r--r--   1 sanket sanket  0 Feb  6 06:49 stat
-r--r--r--   1 sanket sanket  0 Feb  6 06:49 statm
-r--r--r--   1 sanket sanket  0 Feb  6 06:49 status
-r--------   1 sanket sanket  0 Feb  6 06:54 syscall
dr-xr-xr-x  32 sanket sanket  0 Feb  6 06:49 task
-rw-r--r--   1 sanket sanket  0 Feb  6 06:54 timens_offsets
-r--r--r--   1 sanket sanket  0 Feb  6 06:54 timers
-rw-rw-rw-   1 sanket sanket  0 Feb  6 06:54 timerslack_ns
-rw-r--r--   1 sanket sanket  0 Feb  6 06:49 uid_map
-r--r--r--   1 sanket sanket  0 Feb  6 06:54 wchan
sanket@hydra:/proc/21489$ cat maps (check!)
```

### Increasing the priority of process
The quickest, most basic way to view niceness information is to use the top command. It displays this information by default in the fourth column (left to right) and therefore doesn't require any additional options or flags.

The other and slightly more involved method is to use the ps command with a generous helping of formatting options. The following command will display processes with their process IDs, name, niceness level, and scheduling class (sorted descending):

```c
sanket@hydra:~$ ps axo pid,comm,nice,cls --sort=-nice
    PID COMMAND          NI CLS
    220 khugepaged       19  TS
   3127 tracker-miner-f   - IDL
    219 ksmd              5  TS
   1730 rtkit-daemon      1  TS
      1 systemd           0  TS
      2 kthreadd          0  TS
      3 pool_workqueue_   0  TS
     13 rcu_tasks_kthre   0  TS
     14 rcu_tasks_rude_   0  TS
     15 rcu_tasks_trace   0  TS
     16 ksoftirqd/0       0  TS
     17 rcu_preempt       0  TS
     18 migration/0       -  FF
     19 idle_inject/0     -  FF
     20 cpuhp/0           0  TS
     21 cpuhp/1           0  TS
     22 idle_inject/1     -  FF
     23 migration/1       -  FF
     24 ksoftirqd/1       0  TS
     27 cpuhp/2           0  TS
     28 idle_inject/2     -  FF
     29 migration/2       -  FF
     30 ksoftirqd/2       0  TS
     33 cpuhp/3           0  TS
     34 idle_inject/3     -  FF
     35 migration/3       -  FF
     36 ksoftirqd/3       0  TS
     39 cpuhp/4           0  TS
     40 idle_inject/4     -  FF
     41 migration/4       -  FF
     42 ksoftirqd/4       0  TS
     45 cpuhp/5           0  TS
     46 idle_inject/5     -  FF
     47 migration/5       -  FF
     48 ksoftirqd/5       0  TS
     51 cpuhp/6           0  TS
     52 idle_inject/6     -  FF
     53 migration/6       -  FF
     54 ksoftirqd/6       0  TS
     57 cpuhp/7           0  TS
     58 idle_inject/7     -  FF
     59 migration/7       -  FF
     60 ksoftirqd/7       0  TS
     63 cpuhp/8           0  TS
     64 idle_inject/8     -  FF
     65 migration/8       -  FF
     66 ksoftirqd/8       0  TS
     69 cpuhp/9           0  TS
     70 idle_inject/9     -  FF
     71 migration/9       -  FF
     72 ksoftirqd/9       0  TS
     75 cpuhp/10          0  TS
     76 idle_inject/10    -  FF
     77 migration/10      -  FF
     78 ksoftirqd/10      0  TS
     79 kworker/10:0-mm   0  TS
     81 cpuhp/11          0  TS
     82 idle_inject/11    -  FF
     83 migration/11      -  FF
     84 ksoftirqd/11      0  TS
     87 cpuhp/12          0  TS
     88 idle_inject/12    -  FF
     89 migration/12      -  FF
     90 ksoftirqd/12      0  TS
     93 cpuhp/13          0  TS
     94 idle_inject/13    -  FF
     95 migration/13      -  FF
     96 ksoftirqd/13      0  TS
     99 cpuhp/14          0  TS
    100 idle_inject/14    -  FF
    101 migration/14      -  FF
    102 ksoftirqd/14      0  TS
    105 cpuhp/15          0  TS
    106 idle_inject/15    -  FF
    107 migration/15      -  FF
    108 ksoftirqd/15      0  TS
    109 kworker/15:0-ev   0  TS
    111 cpuhp/16          0  TS
    112 idle_inject/16    -  FF
    113 migration/16      -  FF
    114 ksoftirqd/16      0  TS
    117 cpuhp/17          0  TS
    118 idle_inject/17    -  FF
    119 migration/17      -  FF
    120 ksoftirqd/17      0  TS
    121 kworker/17:0-ev   0  TS
    123 cpuhp/18          0  TS
    124 idle_inject/18    -  FF
    125 migration/18      -  FF
    126 ksoftirqd/18      0  TS
    129 cpuhp/19          0  TS
    130 idle_inject/19    -  FF
    131 migration/19      -  FF
    132 ksoftirqd/19      0  TS
    135 cpuhp/20          0  TS
    136 idle_inject/20    -  FF
    137 migration/20      -  FF
    138 ksoftirqd/20      0  TS
    141 cpuhp/21          0  TS
    142 idle_inject/21    -  FF
    143 migration/21      -  FF
    144 ksoftirqd/21      0  TS
    147 cpuhp/22          0  TS
    148 idle_inject/22    -  FF
    149 migration/22      -  FF
    150 ksoftirqd/22      0  TS
    153 cpuhp/23          0  TS
    154 idle_inject/23    -  FF
    155 migration/23      -  FF
    156 ksoftirqd/23      0  TS
    159 cpuhp/24          0  TS
    160 idle_inject/24    -  FF
    161 migration/24      -  FF
    162 ksoftirqd/24      0  TS
    165 cpuhp/25          0  TS
    166 idle_inject/25    -  FF
    167 migration/25      -  FF
    168 ksoftirqd/25      0  TS
    171 cpuhp/26          0  TS
    172 idle_inject/26    -  FF
    173 migration/26      -  FF
    174 ksoftirqd/26      0  TS
    177 cpuhp/27          0  TS
    178 idle_inject/27    -  FF
    179 migration/27      -  FF
    180 ksoftirqd/27      0  TS
    183 cpuhp/28          0  TS
    184 idle_inject/28    -  FF
    185 migration/28      -  FF
    186 ksoftirqd/28      0  TS
    189 cpuhp/29          0  TS
    190 idle_inject/29    -  FF
    191 migration/29      -  FF
    192 ksoftirqd/29      0  TS
    193 kworker/29:0-ev   0  TS
    195 cpuhp/30          0  TS
    196 idle_inject/30    -  FF
    197 migration/30      -  FF
    198 ksoftirqd/30      0  TS
    199 kworker/30:0-ev   0  TS
    201 cpuhp/31          0  TS
    202 idle_inject/31    -  FF
    203 migration/31      -  FF
    204 ksoftirqd/31      0  TS
    209 kdevtmpfs         0  TS
    211 kauditd           0  TS
    213 khungtaskd        0  TS
    214 oom_reaper        0  TS
    218 kcompactd0        0  TS
    224 irq/9-acpi        -  FF
    233 watchdogd         -  FF
    236 irq/27-AMD-Vi     -  FF
    237 kworker/18:1-mm   0  TS
    239 kswapd0           0  TS
    240 ecryptfs-kthrea   0  TS
    242 irq/43-pciehp     -  FF
    243 irq/44-pciehp     -  FF
    248 kworker/6:1-eve   0  TS
    250 kworker/9:1-rcu   0  TS
    252 kworker/11:1-ev   0  TS
    254 kworker/13:1-mm   0  TS
    255 kworker/14:1-mm   0  TS
    256 kworker/15:1-ev   0  TS
    259 kworker/20:1-mm   0  TS
    260 kworker/21:1-rc   0  TS
    261 kworker/22:1-mm   0  TS
    263 kworker/24:1-ev   0  TS
    264 kworker/25:1-mm   0  TS
    266 kworker/27:1-ev   0  TS
    268 kworker/29:1-ev   0  TS
    273 kworker/30:2-rc   0  TS
    392 kworker/12:2-mm   0  TS
    416 scsi_eh_0         0  TS
    418 scsi_eh_1         0  TS
    420 scsi_eh_2         0  TS
    422 scsi_eh_3         0  TS
    424 scsi_eh_4         0  TS
    426 scsi_eh_5         0  TS
    428 kworker/u65:3-e   0  TS
    433 scsi_eh_6         0  TS
    435 scsi_eh_7         0  TS
    437 scsi_eh_8         0  TS
    439 scsi_eh_9         0  TS
    441 scsi_eh_10        0  TS
    443 scsi_eh_11        0  TS
    533 jbd2/nvme0n1p3-   0  TS
    600 kworker/28:2-mm   0  TS
    620 systemd-udevd     0  TS
    872 kworker/7:2-eve   0  TS
    899 kworker/5:2-eve   0  TS
    900 nv_queue          0  TS
    901 nv_queue          0  TS
    902 nv_open_q         0  TS
    939 nv_open_q         0  TS
    940 systemd-oomd      0  TS
    941 systemd-resolve   0  TS
    942 systemd-timesyn   0  TS
    962 kworker/23:2-mm   0  TS
    968 nvidia-modeset/   0  TS
    969 nvidia-modeset/   0  TS
    972 irq/189-nvidia    -  FF
    973 irq/190-nvidia    -  FF
    974 irq/191-nvidia    -  FF
    975 irq/192-nvidia    -  FF
    976 irq/193-nvidia    -  FF
    977 irq/194-nvidia    -  FF
    978 irq/195-nvidia    -  FF
    979 irq/196-nvidia    -  FF
    980 nvidia            0  TS
    981 nv_queue          0  TS
   1036 card1-crtc0       -  FF
   1037 card1-crtc1       -  FF
   1038 card1-crtc2       -  FF
   1039 card1-crtc3       -  FF
   1060 accounts-daemon   0  TS
   1061 acpid             0  TS
   1064 avahi-daemon      0  TS
   1065 bluetoothd        0  TS
   1066 cron              0  TS
   1067 dbus-daemon       0  TS
   1068 NetworkManager    0  TS
   1073 kworker/19:3-rc   0  TS
   1074 irqbalance        0  TS
   1076 networkd-dispat   0  TS
   1079 polkitd           0  TS
   1080 power-profiles-   0  TS
   1082 rsyslogd          0  TS
   1088 snapd             0  TS
   1090 switcheroo-cont   0  TS
   1096 systemd-logind    0  TS
   1099 udisksd           0  TS
   1102 wpa_supplicant    0  TS
   1105 avahi-daemon      0  TS
   1162 cupsd             0  TS
   1167 ModemManager      0  TS
   1191 boltd             0  TS
   1216 containerd        0  TS
   1217 unattended-upgr   0  TS
   1218 sshd              0  TS
   1315 irq/198-nvidia    -  FF
   1316 nvidia            0  TS
   1317 nv_queue          0  TS
   1587 UVM global queu   0  TS
   1589 UVM deferred re   0  TS
   1590 UVM Tools Event   0  TS
   1697 nvidia-persiste   0  TS
   1701 gdm3              0  TS
   1855 upowerd           0  TS
   1861 packagekitd       0  TS
   1975 colord            0  TS
   2061 cups-browsed      0  TS
   2062 dockerd           0  TS
   2064 kerneloops        0  TS
   2066 kerneloops        0  TS
   2101 kworker/27:2-rc   0  TS
   2218 irq/75-enp12s0    -  FF
   2324 kworker/10:2-rc   0  TS
   2348 kworker/26:2-mm   0  TS
   2422 kworker/13:2-rc   0  TS
   2458 gdm-session-wor   0  TS
   2471 systemd           0  TS
   2472 (sd-pam)          0  TS
   2479 pipewire-media-   0  TS
   2489 gnome-keyring-d   0  TS
   2502 dbus-daemon       0  TS
   2523 xdg-document-po   0  TS
   2526 xdg-permission-   0  TS
   2532 fusermount3       0  TS
   2572 gdm-x-session     0  TS
   2574 Xorg              0  TS
   2594 gnome-session-b   0  TS
   2667 at-spi-bus-laun   0  TS
   2673 dbus-daemon       0  TS
   2680 gnome-remote-de   0  TS
   2682 gnome-session-c   0  TS
   2693 gvfsd             0  TS
   2700 gvfsd-fuse        0  TS
   2702 gnome-session-b   0  TS
   2730 gnome-shell       0  TS
   2740 nvidia-drm/time   0  TS
   2752 gnome-shell-cal   0  TS
   2760 evolution-sourc   0  TS
   2768 goa-daemon        0  TS
   2769 gvfs-udisks2-vo   0  TS
   2775 evolution-calen   0  TS
   2780 gvfs-goa-volume   0  TS
   2791 goa-identity-se   0  TS
   2793 gvfs-mtp-volume   0  TS
   2803 gvfs-gphoto2-vo   0  TS
   2807 dconf-service     0  TS
   2816 evolution-addre   0  TS
   2817 gvfs-afc-volume   0  TS
   2834 gvfsd-trash       0  TS
   2843 gjs               0  TS
   2846 at-spi2-registr   0  TS
   2870 sh                0  TS
   2871 gsd-a11y-settin   0  TS
   2873 gsd-color         0  TS
   2874 ibus-daemon       0  TS
   2876 gsd-datetime      0  TS
   2877 gsd-housekeepin   0  TS
   2879 gsd-keyboard      0  TS
   2881 gsd-media-keys    0  TS
   2884 gsd-power         0  TS
   2887 gsd-print-notif   0  TS
   2891 gsd-rfkill        0  TS
   2893 gsd-screensaver   0  TS
   2896 gsd-sharing       0  TS
   2897 gsd-smartcard     0  TS
   2900 gsd-sound         0  TS
   2904 gsd-wacom         0  TS
   2906 gsd-xsettings     0  TS
   2917 xdg-desktop-por   0  TS
   2927 gsd-disk-utilit   0  TS
   2943 evolution-alarm   0  TS
   2949 ibus-memconf      0  TS
   2950 ibus-extension-   0  TS
   2953 ibus-x11          0  TS
   2961 ibus-portal       0  TS
   2997 gsd-printer       0  TS
   3032 xdg-desktop-por   0  TS
   3045 gjs               0  TS
   3056 snap-store        0  TS
   3119 ibus-engine-sim   0  TS
   3219 xdg-desktop-por   0  TS
   3248 snapd-desktop-i   0  TS
   3366 snapd-desktop-i   0  TS
   3375 fwupd             0  TS
   3461 gjs               0  TS
   3483 gvfsd-metadata    0  TS
   3588 firefox           0  TS
   3676 crashhelper       0  TS
   3819 forkserver        0  TS
   3821 Socket Process    0  TS
   3874 Privileged Cont   0  TS
   3885 RDD Process       0  TS
   3926 snap              0  TS
   4021 Isolated Web Co   0  TS
   4037 WebExtensions     0  TS
   4225 Utility Process   0  TS
   4369 jetbrains-toolb   0  TS
   4576 glib-pacrunner    0  TS
   4617 gnome-terminal-   0  TS
   4640 bash              0  TS
   4649 update-notifier   0  TS
   5147 kworker/1:1-eve   0  TS
   5273 kworker/u64:0-r   0  TS
   5295 kworker/2:0-rcu   0  TS
   5346 kworker/19:0-ev   0  TS
   5378 kworker/u66:2-e   0  TS
   5464 Isolated Web Co   0  TS
   6202 gvfsd-network     0  TS
   6235 gvfsd-dnssd       0  TS
   6488 kworker/25:0      0  TS
   6495 kworker/24:0-mm   0  TS
   6513 kworker/8:0-mm_   0  TS
   6545 code              0  TS
   6550 code              0  TS
   6551 code              0  TS
   6553 code              0  TS
   6569 chrome_crashpad   0  TS
   6586 code              0  TS
   6595 code              0  TS
   6609 code              0  TS
   6632 nvidia-drm/time   0  TS
   6641 code              0  TS
   6689 code              0  TS
   6690 code              0  TS
   6691 code              0  TS
   9631 kworker/3:1-ine   0  TS
   9896 kworker/28:0-rc   0  TS
   9897 kworker/0:2-eve   0  TS
  10018 kworker/u65:0-e   0  TS
  14823 kworker/31:0-mm   0  TS
  14933 kworker/20:0-mm   0  TS
  14960 kworker/16:1-rc   0  TS
  14983 kworker/4:1-eve   0  TS
  15115 kworker/12:1      0  TS
  15331 kworker/14:0-rc   0  TS
  15369 gvfsd-recent      0  TS
  15452 kworker/u66:0-f   0  TS
  16117 grep              0  TS
  16665 kworker/1:2-rcu   0  TS
  16674 kworker/9:2-mm_   0  TS
  16675 kworker/18:0-ev   0  TS
  16677 Isolated Web Co   0  TS
  16840 kworker/11:2      0  TS
  17452 kworker/6:0-ine   0  TS
  17498 kworker/16:0-mm   0  TS
  17905 kworker/u64:1-p   0  TS
  17952 grep              0  TS
  18180 kworker/u65:1-e   0  TS
  19138 kworker/u66:3-e   0  TS
  19513 bash              0  TS
  20403 kworker/u64:2-r   0  TS
  20509 kworker/3:0-mm_   0  TS
  20510 kworker/23:1-rc   0  TS
  20511 kworker/5:0-eve   0  TS
  20581 kworker/17:1-ev   0  TS
  20582 kworker/26:1-rc   0  TS
  20583 kworker/0:0-eve   0  TS
  20658 kworker/2:2-mm_   0  TS
  20659 kworker/31:1      0  TS
  20660 kworker/8:2-rcu   0  TS
  20661 kworker/21:0-ev   0  TS
  20671 kworker/4:0-eve   0  TS
  21598 kworker/7:1-rcu   0  TS
  21601 kworker/22:0      0  TS
  21625 Isolated Web Co   0  TS
  21632 Isolated Web Co   0  TS
  21698 kworker/u66:1-e   0  TS
  21968 loop              0  TS
  22636 Isolated Web Co   0  TS
  24432 kworker/4:2-eve   0  TS
  24433 kworker/14:2-rc   0  TS
  24434 kworker/u64:3-r   0  TS
  24435 kworker/3:2-eve   0  TS
  24525 Isolated Servic   0  TS
  24584 Web Content       0  TS
  24658 Web Content       0  TS
  24665 Web Content       0  TS
  24827 ps                0  TS
    573 systemd-journal  -1  TS
   4892 krfcommd        -10  TS
   2478 pipewire        -11  TS
   2480 pulseaudio      -11  TS
      4 kworker/R-rcu_g -20  TS
      5 kworker/R-rcu_p -20  TS
      6 kworker/R-slub_ -20  TS
      7 kworker/R-netns -20  TS
     10 kworker/0:0H-ev -20  TS
     12 kworker/R-mm_pe -20  TS
     26 kworker/1:0H-ev -20  TS
     32 kworker/2:0H-ev -20  TS
     38 kworker/3:0H-ev -20  TS
     44 kworker/4:0H-ev -20  TS
     50 kworker/5:0H-ev -20  TS
     56 kworker/6:0H-ev -20  TS
     62 kworker/7:0H-ev -20  TS
     68 kworker/8:0H-ev -20  TS
     74 kworker/9:0H-ev -20  TS
     80 kworker/10:0H-e -20  TS
     86 kworker/11:0H-e -20  TS
     92 kworker/12:0H-e -20  TS
     98 kworker/13:0H-e -20  TS
    104 kworker/14:0H-e -20  TS
    110 kworker/15:0H-e -20  TS
    116 kworker/16:0H-e -20  TS
    122 kworker/17:0H-e -20  TS
    128 kworker/18:0H-e -20  TS
    134 kworker/19:0H-e -20  TS
    140 kworker/20:0H-e -20  TS
    146 kworker/21:0H-e -20  TS
    152 kworker/22:0H-e -20  TS
    158 kworker/23:0H-e -20  TS
    164 kworker/24:0H-e -20  TS
    170 kworker/25:0H-e -20  TS
    176 kworker/26:0H-e -20  TS
    182 kworker/27:0H-e -20  TS
    188 kworker/28:0H-e -20  TS
    194 kworker/29:0H-e -20  TS
    200 kworker/30:0H-e -20  TS
    206 kworker/31:0H-e -20  TS
    210 kworker/R-inet_ -20  TS
    216 kworker/R-write -20  TS
    221 kworker/R-kinte -20  TS
    222 kworker/R-kbloc -20  TS
    223 kworker/R-blkcg -20  TS
    226 kworker/R-tpm_d -20  TS
    227 kworker/R-ata_s -20  TS
    228 kworker/R-md    -20  TS
    229 kworker/R-md_bi -20  TS
    230 kworker/R-edac- -20  TS
    232 kworker/R-devfr -20  TS
    234 kworker/16:1H-k -20  TS
    241 kworker/R-kthro -20  TS
    271 kworker/R-acpi_ -20  TS
    274 kworker/R-mld   -20  TS
    275 kworker/25:1H-k -20  TS
    276 kworker/R-ipv6_ -20  TS
    283 kworker/R-kstrp -20  TS
    285 kworker/u67:0-h -20  TS
    301 kworker/R-charg -20  TS
    321 kworker/9:1H-kb -20  TS
    325 kworker/10:1H-k -20  TS
    339 kworker/22:1H-k -20  TS
    340 kworker/31:1H-k -20  TS
    344 kworker/20:1H-k -20  TS
    345 kworker/8:1H-kb -20  TS
    346 kworker/1:1H-kb -20  TS
    347 kworker/17:1H-k -20  TS
    348 kworker/18:1H-k -20  TS
    349 kworker/19:1H-k -20  TS
    350 kworker/21:1H-k -20  TS
    351 kworker/2:1H-kb -20  TS
    352 kworker/0:1H-kb -20  TS
    353 kworker/3:1H-kb -20  TS
    354 kworker/23:1H-k -20  TS
    355 kworker/5:1H-kb -20  TS
    356 kworker/4:1H-kb -20  TS
    363 kworker/12:1H-k -20  TS
    385 kworker/11:1H-k -20  TS
    386 kworker/6:1H-kb -20  TS
    387 kworker/13:1H-k -20  TS
    388 kworker/14:1H-k -20  TS
    389 kworker/7:1H-kb -20  TS
    390 kworker/15:1H-k -20  TS
    391 kworker/26:1H-k -20  TS
    394 kworker/29:1H-k -20  TS
    395 kworker/27:1H-k -20  TS
    396 kworker/28:1H-k -20  TS
    401 kworker/24:1H-k -20  TS
    405 kworker/30:1H-k -20  TS
    412 kworker/R-nvme- -20  TS
    413 kworker/R-nvme- -20  TS
    414 kworker/R-nvme- -20  TS
    415 kworker/R-nvme- -20  TS
    417 kworker/R-scsi_ -20  TS
    419 kworker/R-scsi_ -20  TS
    421 kworker/R-scsi_ -20  TS
    423 kworker/R-scsi_ -20  TS
    425 kworker/R-scsi_ -20  TS
    427 kworker/R-scsi_ -20  TS
    434 kworker/R-scsi_ -20  TS
    436 kworker/R-scsi_ -20  TS
    438 kworker/R-scsi_ -20  TS
    440 kworker/R-scsi_ -20  TS
    442 kworker/R-scsi_ -20  TS
    444 kworker/R-scsi_ -20  TS
    463 kworker/R-atlan -20  TS
    534 kworker/R-ext4- -20  TS
    770 kworker/R-crypt -20  TS
    954 kworker/R-led_w -20  TS
    955 kworker/u67:1-h -20  TS
    966 kworker/R-amdgp -20  TS
    989 kworker/R-ttm   -20  TS
    992 kworker/R-uas   -20  TS
   1031 kworker/R-amdgp -20  TS
   1032 kworker/R-amdgp -20  TS
   1033 kworker/R-amdgp -20  TS
   1034 kworker/R-amdgp -20  TS
   1035 kworker/R-dm_vb -20  TS
   4878 kworker/R-cfg80 -20  TS
   4879 kworker/R-rtw88 -20  TS
   4880 kworker/R-rtw88 -20  TS
   4997 kworker/u69:2-r -20  TS
  17440 kworker/u69:1-r -20  TS
  17450 kworker/u68:1-r -20  TS
  20322 kworker/u68:2-r -20  TS
sanket@hydra:~$ 
```

### Process becomes Zombie and Orphans


> Check demo3.c

```c
sanket@hydra:~/Desktop/OS$ ps -x | grep demo3
  28646 pts/1    S+     0:00 ./demo3
  28647 pts/1    Z+     0:00 [demo3] <defunct>
  28648 pts/1    S+     0:00 ./demo3
  28684 pts/2    S+     0:00 grep --color=auto demo3
sanket@hydra:~/Desktop/OS$ ps -x | grep demo3
  28648 pts/1    S      0:00 ./demo3
  28719 pts/2    S+     0:00 grep --color=auto demo3
sanket@hydra:~/Desktop/OS$ ps -x | grep demo3
  28648 pts/1    S      0:00 ./demo3
  28745 pts/2    S+     0:00 grep --color=auto demo3
sanket@hydra:~/Desktop/OS$ ps -x | grep demo3
  28648 pts/1    S      0:00 ./demo3
  28760 pts/2    S+     0:00 grep --color=auto demo3
sanket@hydra:~/Desktop/OS$ ps -x | grep demo3
  28648 pts/1    S      0:00 ./demo3
  28762 pts/2    S+     0:00 grep --color=auto demo3
sanket@hydra:~/Desktop/OS$ ps -x | grep demo3
  28853 pts/2    S+     0:00 grep --color=auto demo3
sanket@hydra:~/Desktop/OS$ 
```

### Cleanup Zombies

> Check demo2.c

```c
sanket@hydra:~/Desktop/OS$ ./demo2
Parent PID = 29912
Child created, not calling wait() yet...
Child PID = 29913 exiting...

Parent calling wait() → Zombie cleanup
sanket@hydra:~/Desktop/OS$ 
```

```c
sanket@hydra:~/Desktop/OS$ ps -x | grep demo2
  29912 pts/1    S+     0:00 ./demo2
  29913 pts/1    Z+     0:00 [demo2] <defunct>
  29960 pts/2    R+     0:00 grep --color=auto demo2
sanket@hydra:~/Desktop/OS$ ps -x | grep demo2
  30064 pts/2    S+     0:00 grep --color=auto demo2
sanket@hydra:~/Desktop/OS$ 
```

### Explicit use of Cores in CPU

> Check demo4.c

```c
sanket@hydra:~/Desktop/OS$ ./demo4
Parent sum (even) = 25000005000000
Child sum (odd) = 25000000000000

Total Execution Time = 0.002251 seconds
sanket@hydra:~/Desktop/OS$ gcc demo4.c -o demo4
demo4.c: In function ‘main’:
demo4.c:52:9: warning: implicit declaration of function ‘wait’ [-Wimplicit-function-declaration]
   52 |         wait(NULL);  // wait for child to finish
      |         ^~~~
sanket@hydra:~/Desktop/OS$ ./demo4
Parent sum (even) = 25000005000000
Child sum (odd) = 25000000000000

Total Execution Time = 0.002236 seconds
sanket@hydra:~/Desktop/OS$ 
```
DIY
```c
>> mpstat -P ALL 1

    -P ALL → shows all cores

    1 → update interval 1 sec

    Watch how CPU utilization spikes on specific cores
```

## Dissecting the Code Dump

```c
sanket@hydra:~/Desktop/OS$ gdb demo
GNU gdb (Ubuntu 12.1-0ubuntu1~22.04.2) 12.1
Copyright (C) 2022 Free Software Foundation, Inc.
License GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.
Type "show copying" and "show warranty" for details.
This GDB was configured as "x86_64-linux-gnu".
Type "show configuration" for configuration details.
For bug reporting instructions, please see:
<https://www.gnu.org/software/gdb/bugs/>.
Find the GDB manual and other documentation resources online at:
    <http://www.gnu.org/software/gdb/documentation/>.

For help, type "help".
Type "apropos word" to search for commands related to "word"...
Reading symbols from demo...
(No debugging symbols found in demo)
(gdb) disassemble -n main
No symbol table is loaded.  Use the "file" command.
(gdb) disassemble  main
Dump of assembler code for function main:
   0x000000000000129f <+0>:	endbr64 
   0x00000000000012a3 <+4>:	push   %rbp
   0x00000000000012a4 <+5>:	mov    %rsp,%rbp
   0x00000000000012a7 <+8>:	sub    $0x1000,%rsp
   0x00000000000012ae <+15>:	orq    $0x0,(%rsp)
   0x00000000000012b3 <+20>:	sub    $0xf80,%rsp
   0x00000000000012ba <+27>:	mov    %fs:0x28,%rax
   0x00000000000012c3 <+36>:	mov    %rax,-0x8(%rbp)
   0x00000000000012c7 <+40>:	xor    %eax,%eax
   0x00000000000012c9 <+42>:	movl   $0x0,-0x1f74(%rbp)
   0x00000000000012d3 <+52>:	lea    0xd2e(%rip),%rax        # 0x2008
   0x00000000000012da <+59>:	mov    %rax,%rdi
   0x00000000000012dd <+62>:	mov    $0x0,%eax
   0x00000000000012e2 <+67>:	call   0x10e0 <printf@plt>
   0x00000000000012e7 <+72>:	lea    -0x1f78(%rbp),%rax
   0x00000000000012ee <+79>:	mov    %rax,%rsi
   0x00000000000012f1 <+82>:	lea    0xd34(%rip),%rax        # 0x202c
   0x00000000000012f8 <+89>:	mov    %rax,%rdi
   0x00000000000012fb <+92>:	mov    $0x0,%eax
   0x0000000000001300 <+97>:	call   0x10f0 <__isoc99_scanf@plt>
   0x0000000000001305 <+102>:	mov    -0x1f78(%rbp),%eax
   0x000000000000130b <+108>:	mov    %eax,%edi
   0x000000000000130d <+110>:	call   0x1209 <factorial>
   0x0000000000001312 <+115>:	mov    %rax,-0x1f58(%rbp)
   0x0000000000001319 <+122>:	mov    -0x1f78(%rbp),%eax
   0x000000000000131f <+128>:	mov    -0x1f58(%rbp),%rdx
   0x0000000000001326 <+135>:	mov    %eax,%esi
   0x0000000000001328 <+137>:	lea    0xd01(%rip),%rax        # 0x2030
   0x000000000000132f <+144>:	mov    %rax,%rdi
   0x0000000000001332 <+147>:	mov    $0x0,%eax
   0x0000000000001337 <+152>:	call   0x10e0 <printf@plt>
   0x000000000000133c <+157>:	movq   $0x1,-0x1f60(%rbp)
   0x0000000000001347 <+168>:	jmp    0x1389 <main+234>
   0x0000000000001349 <+170>:	mov    -0x1f58(%rbp),%rax
   0x0000000000001350 <+177>:	cqto   
   0x0000000000001352 <+179>:	idivq  -0x1f60(%rbp)
   0x0000000000001359 <+186>:	mov    %rdx,%rax
   0x000000000000135c <+189>:	test   %rax,%rax
   0x000000000000135f <+192>:	jne    0x1381 <main+226>
   0x0000000000001361 <+194>:	mov    -0x1f74(%rbp),%eax
   0x0000000000001367 <+200>:	lea    0x1(%rax),%edx
   0x000000000000136a <+203>:	mov    %edx,-0x1f74(%rbp)
   0x0000000000001370 <+209>:	cltq   
   0x0000000000001372 <+211>:	mov    -0x1f60(%rbp),%rdx
   0x0000000000001379 <+218>:	mov    %rdx,-0x1f50(%rbp,%rax,8)
   0x0000000000001381 <+226>:	addq   $0x1,-0x1f60(%rbp)
   0x0000000000001389 <+234>:	mov    -0x1f60(%rbp),%rax
   0x0000000000001390 <+241>:	cmp    -0x1f58(%rbp),%rax
--Type <RET> for more, q to quit, c to continue without paging--
```

### OS Forensics

For this first piece, we'll use `/proc` to find and modify variables (in this example, an ASCII string) contained inside the virtual memory of a running process, and learn some cool things along the way.

## Prerequisites

In order to fully understand this article, you need to know:

- The basics of the C programming language
- Some Python
- The very basics of the Linux filesystem and the shell

## Virtual Memory

In computing, virtual memory is a memory management technique that is implemented using both hardware and software. It maps memory addresses used by a program, called virtual addresses, into physical addresses in computer memory. Main storage (as seen by a process or task) appears as a contiguous address space, or collection of contiguous segments. The operating system manages virtual address spaces and the assignment of real memory to virtual memory. Address translation hardware in the CPU, often referred to as a memory management unit or MMU, automatically translates virtual addresses to physical addresses. Software within the operating system may extend these capabilities to provide a virtual address space that can exceed the capacity of real memory and thus reference more memory than is physically present in the computer.

The primary benefits of virtual memory include freeing applications from having to manage a shared memory space, increased security due to memory isolation, and being able to conceptually use more memory than might be physically available, using the technique of paging.

You can read more about the virtual memory on [Wikipedia](https://en.wikipedia.org/wiki/Virtual_memory).

- Each process has its own virtual memory
- The amount of virtual memory depends on your system's architecture
- Each OS handles virtual memory differently, but for most modern operating systems, the virtual memory of a process looks like this:

![virtual memory](https://s3-us-west-1.amazonaws.com/holbertonschool/medias/virtual_memory.png)

In the high memory addresses you can find (this is a non exhaustive list, there's much more to be found, but that's not today's topic):

- The command line arguments and environment variables
- The stack, growing "downwards". This may seem counter-intuitive, but this is the way the stack is implemented in virtual memory

In the low memory addresses you can find:

- Your executable (it's a little more complicated than that, but this is enough to understand the rest of this article)
- The heap, growing "upwards"

The heap is a portion of memory that is dynamically allocated (i.e. containing memory allocated using `malloc`).

Also, keep in mind that **virtual memory is not the same as RAM**.

## C program

Let's start with this simple C program:

```c
#include <stdlib.h>
#include <stdio.h>
#include <string.h>

/**
 * main - uses strdup to create a new string, and prints the
 * address of the new duplcated string
 *
 * Return: EXIT_FAILURE if malloc failed. Otherwise EXIT_SUCCESS
 */
int main(void)
{
	char *s;

	s = strdup("LinuxWorkshop");
	if (s == NULL)
	{
		fprintf(stderr, "Can't allocate mem with malloc\n");
		return (EXIT_FAILURE);
	}
	printf("%p\n", (void *)s);
	return (EXIT_SUCCESS);
}
```

### strdup

_Take a moment to think before going further. How do you think `strdup` creates a copy of the string "LinuxWorkshop"? How can you confirm that?_

.

.

.

`strdup` has to create a new string, so it first has to reserve space for it. The function `strdup` is probably using `malloc`. A quick look at its man page can confirm:

```man
DESCRIPTION
       The  strdup()  function returns a pointer to a new string which is a duplicate of the string s.
       Memory for the new string is obtained with malloc(3), and can be freed with free(3).
```

_Take a moment to think before going further. Based on what we said earlier about virtual memory, where do you think the duplicate string will be located? At a high or low memory address?_

Probably in the lower addresses (in the heap). Let's compile and run our small C program to test our hypothesis:

```shell
sanket@hydra:~/Desktop/OS/OS_forensics/intro$ gcc -Wall -Wextra -pedantic -Werror main.c -o LinuxWorkshop
sanket@hydra:~/Desktop/OS/OS_forensics/intro$ ./LinuxWorkshop 
0x5ee3215d82a0

```

Our duplicated string is located at the address `0x5ee3215d82a0`. Great. But is this a low or a high memory address?

### How big is the virtual memory of a process

The size of the virtual memory of a process depends on your system architecture. In this example I am using a 64-bit machine, so theoretically the size of each process' virtual memory is 2^64 bytes. In theory, the highest memory address possible is `0xffffffffffffffff` (1.8446744e+19), and the lowest is `0x0`.

`0x1822010` is small compared to `0xffffffffffffffff`, so the duplicated string is probably located at a lower memory address. We will be able to confirm this when we will be looking at the `proc` filesystem).

## The proc filesystem

From `man proc`: 

```
The proc filesystem is a pseudo-filesystem which provides an interface to kernel data structures.  It is commonly mounted at `/proc`.  Most of it is read-only, but some files allow kernel variables to be changed.
```

If you list the contents of your `/proc` directory, you will probably see a lot of files. We will focus on two of them:

- `/proc/[pid]/mem`
- `/proc/[pid]/maps`

### mem

From `man proc`:

```man
      /proc/[pid]/mem
              This file can be used to access the pages of a process's memory
	      through open(2), read(2), and lseek(2).
```

Awesome! So, can we access and modify the entire virtual memory of any process?

### maps

From `man proc`:

```man
      /proc/[pid]/maps
              A  file containing the currently mapped memory regions and their access permissions.
	      See mmap(2) for some further information about memory mappings.

              The format of the file is:

       address           perms offset  dev   inode       pathname
       00400000-00452000 r-xp 00000000 08:02 173521      /usr/bin/dbus-daemon
       00651000-00652000 r--p 00051000 08:02 173521      /usr/bin/dbus-daemon
       00652000-00655000 rw-p 00052000 08:02 173521      /usr/bin/dbus-daemon
       00e03000-00e24000 rw-p 00000000 00:00 0           [heap]
       00e24000-011f7000 rw-p 00000000 00:00 0           [heap]
       ...
       35b1800000-35b1820000 r-xp 00000000 08:02 135522  /usr/lib64/ld-2.15.so
       35b1a1f000-35b1a20000 r--p 0001f000 08:02 135522  /usr/lib64/ld-2.15.so
       35b1a20000-35b1a21000 rw-p 00020000 08:02 135522  /usr/lib64/ld-2.15.so
       35b1a21000-35b1a22000 rw-p 00000000 00:00 0
       35b1c00000-35b1dac000 r-xp 00000000 08:02 135870  /usr/lib64/libc-2.15.so
       35b1dac000-35b1fac000 ---p 001ac000 08:02 135870  /usr/lib64/libc-2.15.so
       35b1fac000-35b1fb0000 r--p 001ac000 08:02 135870  /usr/lib64/libc-2.15.so
       35b1fb0000-35b1fb2000 rw-p 001b0000 08:02 135870  /usr/lib64/libc-2.15.so
       ...
       f2c6ff8c000-7f2c7078c000 rw-p 00000000 00:00 0    [stack:986]
       ...
       7fffb2c0d000-7fffb2c2e000 rw-p 00000000 00:00 0   [stack]
       7fffb2d48000-7fffb2d49000 r-xp 00000000 00:00 0   [vdso]

              The address field is the address space in the process that the mapping occupies.
	      The perms field is a set of permissions:

                   r = read
                   w = write
                   x = execute
                   s = shared
                   p = private (copy on write)

              The offset field is the offset into the file/whatever;
	      dev is the device (major:minor); inode is the inode on that device.   0  indicates
              that no inode is associated with the memory region,
	      as would be the case with BSS (uninitialized data).

              The  pathname field will usually be the file that is backing the mapping.
	      For ELF files, you can easily coordinate with the offset field
              by looking at the Offset field in the ELF program headers (readelf -l).

              There are additional helpful pseudo-paths:

                   [stack]
                          The initial process's (also known as the main thread's) stack.

                   [stack:<tid>] (since Linux 3.4)
                          A thread's stack (where the <tid> is a thread ID).
			  It corresponds to the /proc/[pid]/task/[tid]/ path.

                   [vdso] The virtual dynamically linked shared object.

                   [heap] The process's heap.

              If the pathname field is blank, this is an anonymous mapping as obtained via the mmap(2) function.
	      There is no easy  way  to  coordinate
              this back to a process's source, short of running it through gdb(1), strace(1), or similar.

              Under Linux 2.0 there is no field giving pathname.
```

This means that we can look at the `/proc/[pid]/mem` file to locate the heap of a running process. If we can read from the heap, we can locate the string we want to modify. And if we can write to the heap, we can replace this string with whatever we want.

### pid

A process is an instance of a program, with a unique process ID. This process ID (PID) is used by many functions and system calls to interact with and manipulate processes.

We can use the program `ps` to get the PID of a running process (`man ps`).

## C program

We now have everything we need to write a script or program that finds a string in the heap of a running process and then replaces it with another string (of the same length or shorter). We will work with the following simple program that infinitely loops and prints a "strduplicated" string.

```c
#include <stdlib.h>
#include <stdio.h>
#include <string.h>
#include <unistd.h>

/**              
 * main - uses strdup to create a new string, loops forever-ever
 *                
 * Return: EXIT_FAILURE if malloc failed. Other never returns
 */
int main(void)
{
     char *s;
     unsigned long int i;

     s = strdup("LinuxWorkshop");
     if (s == NULL)
     {
          fprintf(stderr, "Can't allocate mem with malloc\n");
          return (EXIT_FAILURE);
     }
     i = 0;
     while (s)
     {
          printf("[%lu] %s (%p)\n", i, s, (void *)s);
          sleep(1);
          i++;
     }
     return (EXIT_SUCCESS);
}
```

Compiling and running the above source code should give you this output, and loop indefinitely until you kill the process.

```
sanket@hydra:~/Desktop/OS/OS_forensics/intro$ gcc -Wall -Wextra -pedantic -Werror loop.c -o loop
sanket@hydra:~/Desktop/OS/OS_forensics/00_intro$ ./loop
[0] LinuxWorkshop (0x57faa50652a0)
[1] LinuxWorkshop (0x57faa50652a0)
[2] LinuxWorkshop (0x57faa50652a0)
[3] LinuxWorkshop (0x57faa50652a0)
[4] LinuxWorkshop (0x57faa50652a0)
[5] LinuxWorkshop (0x57faa50652a0)
[6] LinuxWorkshop (0x57faa50652a0)
[7] LinuxWorkshop (0x57faa50652a0)
[8] LinuxWorkshop (0x57faa50652a0)
[9] LinuxWorkshop (0x57faa50652a0)
[10] LinuxWorkshop (0x57faa50652a0)
[11] LinuxWorkshop (0x57faa50652a0)
[12] LinuxWorkshop (0x57faa50652a0)
[13] LinuxWorkshop (0x57faa50652a0)
[14] LinuxWorkshop (0x57faa50652a0)
[15] LinuxWorkshop (0x57faa50652a0)
[16] LinuxWorkshop (0x57faa50652a0)
[17] LinuxWorkshop (0x57faa50652a0)
[18] LinuxWorkshop (0x57faa50652a0)
[19] LinuxWorkshop (0x57faa50652a0)
[20] LinuxWorkshop (0x57faa50652a0)
[21] LinuxWorkshop (0x57faa50652a0)
[22] LinuxWorkshop (0x57faa50652a0)
[23] LinuxWorkshop (0x57faa50652a0)
[24] LinuxWorkshop (0x57faa50652a0)
...
```

_If you would like, pause the reading now and try to write a script or program that finds a string in the heap of a running process before reading further._

.

.

.

### looking at /proc

Let's run our `loop` program.

```
sanket@hydra:~/Desktop/OS/OS_forensics/intro$ gcc -Wall -Wextra -pedantic -Werror loop.c -o loop
sanket@hydra:~/Desktop/OS/OS_forensics/00_intro$ ./loop
[0] LinuxWorkshop (0x57faa50652a0)
[1] LinuxWorkshop (0x57faa50652a0)
[2] LinuxWorkshop (0x57faa50652a0)
[3] LinuxWorkshop (0x57faa50652a0)
[4] LinuxWorkshop (0x57faa50652a0)
[5] LinuxWorkshop (0x57faa50652a0)
[6] LinuxWorkshop (0x57faa50652a0)
[7] LinuxWorkshop (0x57faa50652a0)
[8] LinuxWorkshop (0x57faa50652a0)
[9] LinuxWorkshop (0x57faa50652a0)
[10] LinuxWorkshop (0x57faa50652a0)
[11] LinuxWorkshop (0x57faa50652a0)
[12] LinuxWorkshop (0x57faa50652a0)
[13] LinuxWorkshop (0x57faa50652a0)
[14] LinuxWorkshop (0x57faa50652a0)
[15] LinuxWorkshop (0x57faa50652a0)
[16] LinuxWorkshop (0x57faa50652a0)
[17] LinuxWorkshop (0x57faa50652a0)
[18] LinuxWorkshop (0x57faa50652a0)
[19] LinuxWorkshop (0x57faa50652a0)
[20] LinuxWorkshop (0x57faa50652a0)
[21] LinuxWorkshop (0x57faa50652a0)
[22] LinuxWorkshop (0x57faa50652a0)
[23] LinuxWorkshop (0x57faa50652a0)
[24] LinuxWorkshop (0x57faa50652a0)
```

The first thing we need to find is the PID of the process.

```shell
sanket@hydra:~/Desktop/OS/OS_forensics/intro$ ps x | grep ./loop | grep -v grep
  18678 pts/0    T      0:00 ./loop
  18768 pts/0    S+     0:00 ./loop

```

In the above example, the PID is 4618 (it will be different each time we run it, and it is probably a different number if you are trying this on your own computer). As a result, the `maps` and `mem` files we want to look at are located in the `/proc/4618` directory:

- `/proc/18768/maps`
- `/proc/18768/mem`

A quick `ls -la` in the directory should give you something like this:

```shell
sanket@hydra:/proc/18920$ ls -la
total 0
dr-xr-xr-x   9 sanket sanket 0 Feb  5 23:15 .
dr-xr-xr-x 610 root   root   0 Feb  6  2026 ..
-r--r--r--   1 sanket sanket 0 Feb  5 23:17 arch_status
dr-xr-xr-x   2 sanket sanket 0 Feb  5 23:17 attr
-rw-r--r--   1 sanket sanket 0 Feb  5 23:17 autogroup
-r--------   1 sanket sanket 0 Feb  5 23:17 auxv
-r--r--r--   1 sanket sanket 0 Feb  5 23:17 cgroup
--w-------   1 sanket sanket 0 Feb  5 23:17 clear_refs
-r--r--r--   1 sanket sanket 0 Feb  5 23:15 cmdline
-rw-r--r--   1 sanket sanket 0 Feb  5 23:17 comm
-rw-r--r--   1 sanket sanket 0 Feb  5 23:17 coredump_filter
-r--r--r--   1 sanket sanket 0 Feb  5 23:17 cpu_resctrl_groups
-r--r--r--   1 sanket sanket 0 Feb  5 23:17 cpuset
lrwxrwxrwx   1 sanket sanket 0 Feb  5 23:17 cwd -> /home/sanket/Desktop/OS/OS_forensics/00_intro
-r--------   1 sanket sanket 0 Feb  5 23:17 environ
lrwxrwxrwx   1 sanket sanket 0 Feb  5 23:17 exe -> /home/sanket/Desktop/OS/OS_forensics/00_intro/loop
dr-x------   2 sanket sanket 3 Feb  5 23:17 fd
dr-xr-xr-x   2 sanket sanket 0 Feb  5 23:17 fdinfo
-rw-r--r--   1 sanket sanket 0 Feb  5 23:17 gid_map
-r--------   1 sanket sanket 0 Feb  5 23:17 io
-r--------   1 sanket sanket 0 Feb  5 23:17 ksm_merging_pages
-r--------   1 sanket sanket 0 Feb  5 23:17 ksm_stat
-r--r--r--   1 sanket sanket 0 Feb  5 23:17 latency
-r--r--r--   1 sanket sanket 0 Feb  5 23:17 limits
-rw-r--r--   1 sanket sanket 0 Feb  5 23:17 loginuid
dr-x------   2 sanket sanket 0 Feb  5 23:17 map_files
-r--r--r--   1 sanket sanket 0 Feb  5 23:16 maps
-rw-------   1 sanket sanket 0 Feb  5 23:17 mem
-r--r--r--   1 sanket sanket 0 Feb  5 23:17 mountinfo
-r--r--r--   1 sanket sanket 0 Feb  5 23:17 mounts
-r--------   1 sanket sanket 0 Feb  5 23:17 mountstats
dr-xr-xr-x  59 sanket sanket 0 Feb  5 23:17 net
dr-x--x--x   2 sanket sanket 0 Feb  5 23:17 ns
-r--r--r--   1 sanket sanket 0 Feb  5 23:17 numa_maps
-rw-r--r--   1 sanket sanket 0 Feb  5 23:17 oom_adj
-r--r--r--   1 sanket sanket 0 Feb  5 23:17 oom_score
-rw-r--r--   1 sanket sanket 0 Feb  5 23:17 oom_score_adj
-r--------   1 sanket sanket 0 Feb  5 23:17 pagemap
-r--------   1 sanket sanket 0 Feb  5 23:17 patch_state
-r--------   1 sanket sanket 0 Feb  5 23:17 personality
-rw-r--r--   1 sanket sanket 0 Feb  5 23:17 projid_map
lrwxrwxrwx   1 sanket sanket 0 Feb  5 23:17 root -> /
-rw-r--r--   1 sanket sanket 0 Feb  5 23:17 sched
-r--r--r--   1 sanket sanket 0 Feb  5 23:17 schedstat
-r--r--r--   1 sanket sanket 0 Feb  5 23:17 sessionid
-rw-r--r--   1 sanket sanket 0 Feb  5 23:17 setgroups
-r--r--r--   1 sanket sanket 0 Feb  5 23:17 smaps
-r--r--r--   1 sanket sanket 0 Feb  5 23:17 smaps_rollup
-r--------   1 sanket sanket 0 Feb  5 23:17 stack
-r--r--r--   1 sanket sanket 0 Feb  5 23:15 stat
-r--r--r--   1 sanket sanket 0 Feb  5 23:17 statm
-r--r--r--   1 sanket sanket 0 Feb  5 23:15 status
-r--------   1 sanket sanket 0 Feb  5 23:17 syscall
dr-xr-xr-x   3 sanket sanket 0 Feb  5 23:17 task
-rw-r--r--   1 sanket sanket 0 Feb  5 23:17 timens_offsets
-r--r--r--   1 sanket sanket 0 Feb  5 23:17 timers
-rw-rw-rw-   1 sanket sanket 0 Feb  5 23:17 timerslack_ns
-rw-r--r--   1 sanket sanket 0 Feb  5 23:17 uid_map
-r--r--r--   1 sanket sanket 0 Feb  5 23:17 wchan
```

### /proc/pid/maps

As we have seen earlier, the `/proc/pid/maps` file is a text file, so we can directly read it. The content of the `maps` file of our process looks like this:

```shell
sanket@hydra:~/Desktop/OS/OS_forensics/intro$:/proc/18768$ cat maps
7fa75b9d000-57fa75b9e000 r--p 00000000 103:08 17586100                  /home/sanket/Desktop/OS/OS_forensics/00_intro/loop
57fa75b9e000-57fa75b9f000 r-xp 00001000 103:08 17586100                  /home/sanket/Desktop/OS/OS_forensics/00_intro/loop
57fa75b9f000-57fa75ba0000 r--p 00002000 103:08 17586100                  /home/sanket/Desktop/OS/OS_forensics/00_intro/loop
57fa75ba0000-57fa75ba1000 r--p 00002000 103:08 17586100                  /home/sanket/Desktop/OS/OS_forensics/00_intro/loop
57fa75ba1000-57fa75ba2000 rw-p 00003000 103:08 17586100                  /home/sanket/Desktop/OS/OS_forensics/00_intro/loop
57faa5065000-57faa5086000 rw-p 00000000 00:00 0                          [heap]
726bdd600000-726bdd628000 r--p 00000000 103:08 24250499                  /usr/lib/x86_64-linux-gnu/libc.so.6
726bdd628000-726bdd7bd000 r-xp 00028000 103:08 24250499                  /usr/lib/x86_64-linux-gnu/libc.so.6
726bdd7bd000-726bdd815000 r--p 001bd000 103:08 24250499                  /usr/lib/x86_64-linux-gnu/libc.so.6
726bdd815000-726bdd816000 ---p 00215000 103:08 24250499                  /usr/lib/x86_64-linux-gnu/libc.so.6
726bdd816000-726bdd81a000 r--p 00215000 103:08 24250499                  /usr/lib/x86_64-linux-gnu/libc.so.6
726bdd81a000-726bdd81c000 rw-p 00219000 103:08 24250499                  /usr/lib/x86_64-linux-gnu/libc.so.6
726bdd81c000-726bdd829000 rw-p 00000000 00:00 0 
726bdd8b8000-726bdd8bb000 rw-p 00000000 00:00 0 
726bdd8cc000-726bdd8ce000 rw-p 00000000 00:00 0 
726bdd8ce000-726bdd8d0000 r--p 00000000 103:08 24250494                  /usr/lib/x86_64-linux-gnu/ld-linux-x86-64.so.2
726bdd8d0000-726bdd8fa000 r-xp 00002000 103:08 24250494                  /usr/lib/x86_64-linux-gnu/ld-linux-x86-64.so.2
726bdd8fa000-726bdd905000 r--p 0002c000 103:08 24250494                  /usr/lib/x86_64-linux-gnu/ld-linux-x86-64.so.2
726bdd906000-726bdd908000 r--p 00037000 103:08 24250494                  /usr/lib/x86_64-linux-gnu/ld-linux-x86-64.so.2
726bdd908000-726bdd90a000 rw-p 00039000 103:08 24250494                  /usr/lib/x86_64-linux-gnu/ld-linux-x86-64.so.2
7ffc19b1f000-7ffc19b40000 rw-p 00000000 00:00 0                          [stack]
7ffc19b51000-7ffc19b55000 r--p 00000000 00:00 0                          [vvar]
7ffc19b55000-7ffc19b57000 r-xp 00000000 00:00 0                          [vdso]
ffffffffff600000-ffffffffff601000 --xp 00000000 00:00 0                  [vsyscall]
```

Circling back to what we said earlier, we can see that the stack (`[stack]`) is located in high memory addresses and the heap (`[heap]`) in the lower memory addresses.

### [heap]

Using the `maps` file, we can find all the information we need to locate our string:

```
57faa5065000-57faa5086000 rw-p 00000000 00:00 0                          [heap]
```

The heap:

- Starts at address `57faa5065000` in the virtual memory of the process
- Ends at memory address: `57faa5086000`
- Is readable and writable (`rw`)

A quick look back to our (still running) `loop` program:

```
...
[331] LinuxWorkshop (0x57faa50652a0)

...
```

-> This confirms that our string is located in the heap. More precisely, it is located at index `0x57` of the heap. If we open the `/proc/pid/mem/` file (in this example `/proc/pid/mem`) and seek to the memory address `0x57faa50652a0`, we can write to the heap of the running process, overwriting the "LinuxWorkshop" string!

Let's write a script or program that does just that. Choose your favorite language and let's do it!

_If you would like, stop reading now and try to write a script or program that finds a string in the heap of a running process, before reading further. The next paragraph will give away the source code of the answer!_

.

.

.

### Overwriting the string in the virtual memory

We'll be using Python 3 for writing the script, but you could write this in any language. Here is the code:

```python
#!/usr/bin/env python3
'''             
Locates and replaces the first occurrence of a string in the heap
of a process    
            
Usage: ./read_write_heap.py PID search_string replace_by_string
Where:           
- PID is the pid of the target process
- search_string is the ASCII string you are looking to overwrite
- replace_by_string is the ASCII string you want to replace
  search_string with
'''

import sys

def print_usage_and_exit():
    print('Usage: {} pid search write'.format(sys.argv[0]))
    sys.exit(1)

# check usage  
if len(sys.argv) != 4:
    print_usage_and_exit()

# get the pid from args
pid = int(sys.argv[1])
if pid <= 0:
    print_usage_and_exit()
search_string = str(sys.argv[2])
if search_string  == "":
    print_usage_and_exit()
write_string = str(sys.argv[3])
if search_string  == "":
    print_usage_and_exit()

# open the maps and mem files of the process
maps_filename = "/proc/{}/maps".format(pid)
print("[*] maps: {}".format(maps_filename))
mem_filename = "/proc/{}/mem".format(pid)
print("[*] mem: {}".format(mem_filename))

# try opening the maps file
try:
    maps_file = open('/proc/{}/maps'.format(pid), 'r')
except IOError as e:
    print("[ERROR] Can not open file {}:".format(maps_filename))
    print("        I/O error({}): {}".format(e.errno, e.strerror))
    sys.exit(1)

for line in maps_file:
    sline = line.split(' ')
    # check if we found the heap
    if sline[-1][:-1] != "[heap]":
        continue
    print("[*] Found [heap]:")

    # parse line
    addr = sline[0]
    perm = sline[1]
    offset = sline[2]
    device = sline[3]
    inode = sline[4]
    pathname = sline[-1][:-1]
    print("\tpathname = {}".format(pathname))
    print("\taddresses = {}".format(addr))
    print("\tpermisions = {}".format(perm))
    print("\toffset = {}".format(offset))
    print("\tinode = {}".format(inode))

    # check if there is read and write permission
    if perm[0] != 'r' or perm[1] != 'w':
        print("[*] {} does not have read/write permission".format(pathname))
        maps_file.close()
        exit(0)

    # get start and end of the heap in the virtual memory
    addr = addr.split("-")
    if len(addr) != 2: # never trust anyone, not even your OS :)
        print("[*] Wrong addr format")
        maps_file.close()
        exit(1)
    addr_start = int(addr[0], 16)
    addr_end = int(addr[1], 16)
    print("\tAddr start [{:x}] | end [{:x}]".format(addr_start, addr_end))

    # open and read mem
    try:
        mem_file = open(mem_filename, 'rb+')
    except IOError as e:
        print("[ERROR] Can not open file {}:".format(mem_filename))
        print("        I/O error({}): {}".format(e.errno, e.strerror))
        maps_file.close()
        exit(1)

    # read heap  
    mem_file.seek(addr_start)
    heap = mem_file.read(addr_end - addr_start)

    # find string
    try:
        i = heap.index(bytes(search_string, "ASCII"))
    except Exception:
        print("Can't find '{}'".format(search_string))
        maps_file.close()
        mem_file.close()
        exit(0)
    print("[*] Found '{}' at {:x}".format(search_string, i))

    # write the new string
    print("[*] Writing '{}' at {:x}".format(write_string, addr_start + i))
    mem_file.seek(addr_start + i)
    mem_file.write(bytes(write_string, "ASCII"))

    # close files
    maps_file.close()
    mem_file.close()

    # there is only one heap in our example
    break
```

Note: You will need to run this script as root, otherwise you won't be able to read or write to the `/proc/pid/mem` file, even if you are the owner of the process.

#### Running the script

```
sanket@hydra:~/Desktop/OS/OS_forensics/intro$ sudo ./read_write_heap.py 18768 LinuxWorkshop "WorkshopisLinux"
[*] maps: /proc/19038/maps
[*] mem: /proc/19038/mem
[*] Found [heap]:
	pathname = [heap]
	addresses = 577631c6c000-577631c8d000
	permisions = rw-p
	offset = 00000000
	inode = 0
	Addr start [577631c6c000] | end [577631c8d000]
[*] Found 'LinuxWorkshop' at 2a0
[*] Writing 'WorkshopisLinux' at 577631c6c2a0
```

Note that this address corresponds to the one we found manually:

- The heap lies from addresses `577631c6c000` to `577631c8d000` in the virtual memory of the running process
- Our string is at index `0x57` in the heap, so at the memory address `0x577631c6c2a0`

If we go back to our `loop` program, it should now print "WorkshopisLinux"

```
...
601] WorkshopisLinux (0x577631c6c2a0)
[602] WorkshopisLinux (0x577631c6c2a0)
[603] WorkshopisLinux (0x577631c6c2a0)
[604] WorkshopisLinux (0x577631c6c2a0)
[605] WorkshopisLinux (0x577631c6c2a0)
[606] WorkshopisLinux (0x577631c6c2a0)
[607] WorkshopisLinux (0x577631c6c2a0)
[608] WorkshopisLinux (0x577631c6c2a0)
[609] WorkshopisLinux (0x577631c6c2a0)
[610] WorkshopisLinux (0x577631c6c2a0)
[611] WorkshopisLinux (0x577631c6c2a0)
[612] WorkshopisLinux (0x577631c6c2a0)
[613] WorkshopisLinux (0x577631c6c2a0)
[614] WorkshopisLinux (0x577631c6c2a0)
[615] WorkshopisLinux (0x577631c6c2a0)
[616] WorkshopisLinux (0x577631c6c2a0)
[617] WorkshopisLinux (0x577631c6c2a0)
[618] WorkshopisLinux (0x577631c6c2a0)
[619] WorkshopisLinux (0x577631c6c2a0)
[620] WorkshopisLinux (0x577631c6c2a0)
[621] WorkshopisLinux (0x577631c6c2a0)
...
```



**Keep Coding and Keep Shining**
